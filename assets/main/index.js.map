{"version":3,"sources":["../file:/D:/cocos%20creator/SuperFruit/assets/script/view/file:/D:/cocos%20creator/SuperFruit/assets/script/view/AudioControl.ts","../file:/D:/cocos%20creator/SuperFruit/assets/script/file:/D:/cocos%20creator/SuperFruit/assets/script/Constants.ts","../file:/D:/cocos-editors/Creator/3.8.1/resources/resources/3d/engine/editor/assets/tools/file:/D:/cocos-editors/Creator/3.8.1/resources/resources/3d/engine/editor/assets/tools/debug-view-runtime-control.ts","../file:/D:/cocos%20creator/SuperFruit/assets/script/view/file:/D:/cocos%20creator/SuperFruit/assets/script/view/FruitRollControl.ts","../file:/D:/cocos%20creator/SuperFruit/assets/script/file:/D:/cocos%20creator/SuperFruit/assets/script/GameFacade.ts","../file:/D:/cocos%20creator/SuperFruit/assets/script/controller/file:/D:/cocos%20creator/SuperFruit/assets/script/controller/GameLoginCommand.ts","../file:/D:/cocos%20creator/SuperFruit/assets/script/messageDef/file:/D:/cocos%20creator/SuperFruit/assets/script/messageDef/GameProtocol.ts","../file:/D:/cocos%20creator/SuperFruit/assets/script/model/file:/D:/cocos%20creator/SuperFruit/assets/script/model/GameProxy.ts","../file:/D:/cocos%20creator/SuperFruit/assets/script/view/file:/D:/cocos%20creator/SuperFruit/assets/script/view/GameScene.ts","../file:/D:/cocos%20creator/SuperFruit/assets/script/messageDef/file:/D:/cocos%20creator/SuperFruit/assets/script/messageDef/GameTableProtocol.ts","../file:/D:/cocos%20creator/SuperFruit/assets/script/model/file:/D:/cocos%20creator/SuperFruit/assets/script/model/GameTableProxy.ts","../file:/D:/cocos%20creator/SuperFruit/assets/script/file:/D:/cocos%20creator/SuperFruit/assets/script/GlobalData.ts","../file:/D:/cocos%20creator/SuperFruit/assets/script/view/file:/D:/cocos%20creator/SuperFruit/assets/script/view/HelpView.ts","../file:/D:/cocos%20creator/SuperFruit/assets/script/view/file:/D:/cocos%20creator/SuperFruit/assets/script/view/LoadScene.ts","../file:/D:/cocos%20creator/SuperFruit/assets/script/view/file:/D:/cocos%20creator/SuperFruit/assets/script/view/RewardAniNode.ts","../file:/D:/cocos%20creator/SuperFruit/assets/script/view/file:/D:/cocos%20creator/SuperFruit/assets/script/view/SetView.ts"],"names":["ccclass","_decorator","property","AUDIO_CONFIG","MUSIC_KEY","EFFECT_KEY","_dec","_dec2","AudioSource","_dec3","_dec4","AudioClip","_descriptor","_applyDecoratedDescriptor","_class2","_Component","AudioControl","_this","_len","arguments","length","args","Array","_key","call","apply","concat","_initializerDefineProperty","_assertThisInitialized","_descriptor2","_descriptor3","_musicEnable","_effectEnable","_inheritsLoose","_proto","prototype","start","musicEnable","sys","localStorage","getItem","this","effectEnable","audioMusic","play","globalData","wEffctEnable","wMusicEnable","GameFacadeInstance","registerMediator","update","deltaTime","onDestroy","removeMediator","name","listNotificationInterests","evtType","Constants","GMAENOTIFICATION_ID","SETAUDIOENABLE","callback","setAudioEnable","playEffect","effectName","audioClip","audioClips","audioEffect","playOneShot","stop","setItem","Component","configurable","enumerable","writable","initializer","_class","_RF","pop","FormatScore","num","fnum","SCORE_RATIO","Math","floor","toString","times","i","toFixed","LEN_TOKEN","LEN_MACHINE_ID","LEN_LOGONFAILURE","GAMESERVER_ADDR","GAME_ID","SERVER_ID","LEN_ACCOUNTS","LEN_PASSWORD","INVALID_TABLE","INVALID_CHAIR","MAX_LINE_COUNT","ITEM_X_COUNT","ITEM_Y_COUNT","MAX_BET_COUNT","ROLL_STATUS","RollNormall_Status","SlowDown_Status","Stop_Status","GAME_STATUS","GAME_SCENE_FREE","GAME_SCENE_WIAT","GAME_SCENE_PLAY","GAME_LOGIN","GAME_ENTERGAMESCENE","GAME_GAMESCENE","GAME_GAMESTART","GAME_GAMECONCLUDE","GAME_SENDREWARDPOOL","FRUITROLLFINISH","CLOSEPOPUPVIEW","USER_STATUS","US_NULL","US_FREE","US_SIT","US_READY","US_LOOKON","US_PLAYING","US_OFFLINE","Node","DebugViewRuntimeControl","_single","strSingle","strComposite","strMisc","compositeModeToggleList","singleModeToggleList","miscModeToggleList","textComponentList","labelComponentList","textContentList","hideButtonLabel","_currentColorIndex","strColor","color","Color","WHITE","BLACK","RED","GREEN","BLUE","node","parent","getComponent","Canvas","uiTransform","UITransform","halfScreenWidth","width","halfScreenHeight","height","x","y","miscNode","getChildByName","buttonNode","instantiate","titleNode","newLabel","EnableAllCompositeModeButton","setPosition","setScale","labelComponent","Label","string","overflow","currentRow","newNode","singleModeToggle","textComponent","getComponentInChildren","RichText","on","Toggle","EventType","TOGGLE","toggleSingleMode","Button","CLICK","enableAllCompositeMode","changeColorButton","changeTextColor","HideButton","hideUI","compositeModeToggle","isChecked","toggleLightingWithAlbedo","toggleCSMColoration","toggleCompositeMode","console","error","isTextMatched","textUI","textDescription","tempText","String","findIndex","search","substr","toggle","debugView","director","root","singleMode","enableCompositeMode","lightingWithAlbedo","csmLayerColoration","button","toggleComponent","activeValue","active","onLoad","BOTTOM_HEIGHT","ITEM_HEIGHT","CCInteger","_dec5","_dec6","SpriteAtlas","FruitRollControl","_descriptor4","_descriptor5","m_fruitItemCount","m_readyEnd","m_rollStatus","m_rollSpeed","moveSpeed","m_checkIndex","m_resultData","initFruit","unschedule","updateRoll","rollLayout","children","destroyAllChildren","fruitName","randomRange","frame","fruitSpriteAtlas","getSpriteFrame","fruitNode","addComponent","Sprite","spriteFrame","addChild","minSpeed","speedDown","_step","_iterator","_createForOfIteratorHelperLoose","done","value","nodePos","getPosition","checkFruitNode","fruitFrame","preLoadResult","setRollStatus","rollStatus","posIndex","tween","by","position","Vec3","sendNotification","schedule","setResultData","data1","data2","data3","setShowState","isGray","_step2","_iterator2","frameName","newFrame","newFrameName","substring","setRewardItem","childIndex","_this$rollLayout$getC","log","fruitSprite","global","globalThis","GameFacade","puremvc","define","Facade","constructor","multitonKey","initializeModel","initializeView","initializeController","startup","registerCommand","GameLoginCommand","addProxy","gameTableProxy","gameProxy","registerProxy","getInstance","instanceMap","instance","NAME","SimpleCommand","execute","facade","retrieveProxy","app","KBEngine","createApp","wssAddr","registerNetInterface","sendLogonRoomData","datatypes","MDM_GF_GAME","CMD_S_GameStart","mainCmdID","subCmdID","argTypes","createFromStream","stream","cbItemInfo","n","itemInfo","readUint8","push","dLineScore","lineScore","readUint64","cbItemType","itemType","cbItemLineCount","lineCount","nGiveAwayCount","readUint32","nTotalGiveAwayCount","cbFreeSpinState","dUserTotalWinScore","nPoolLineCount","nPoolRewardScore","CMD_S_GameConclude","CMD_S_RewardPool","poolNum","CMD_S_Lottery","dLotteryScore","CMD_C_GameStart","write2bundle","bundle","writeUint8","size","CMD_C_GiveAwayStart","CMD_C_GameConclude","Proxy","onRegister","net","registerServer","registerClient","onSubGameStart","data","onSubGameConclude","onSubRewardPool","PoolNum","onSubGameLottery","requestSpin","betNum","isFree","socket","callServer","requestGameConclude","LinePosConfig","_dec7","_dec8","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","Prefab","_dec16","_dec17","GameScene","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_popUpView","_lineCount","_rollNodeIndex","_lineWinScore","_itemType","_itemInfo","_getFreeNum","_winScore","_freeNum","_poolRewardNum","_poolNum","_cellScore","_betScore","_betIndex","_isSpin","_maxBetIndex","_isAuto","_isHoldBtn","_gameProxy","_gameTableProxy","startRodAnimation","nodeStartRod","Animation","FINISHED","setRollNodesStatus","updateFreeNum","initUserInfo","btnSpin","TOUCH_START","onBtnSpinTouch","TOUCH_END","btnFreeSpin","input","Input","onTouchEnd","sendGameOption","isMobile","find","eulerAngles","Tween","stopAll","off","rollFinishCallBack","closePopUpView","onGameScene","onGameStart","onGameConclude","onSendRewardPool","event","popViewRect","getBoundingBox","touchPos","getUILocation","convertToNodeSpaceAR","contains","Vec2","destroy","_this2","touchNode","target","type","delay","stopAllByTarget","updateButtonState","onClickStart","openPopUpView","customEventData","popUpView","helpView","setView","setSiblingIndex","cbBetCount","lCellScore","dBetScore","updateRewardPool","updateBetScore","wGameStatus","sendUserReady","wUserScore","rollNodes","audioControl","onClickExit","_this3","labUserName","nodeUserInfo","wSzNickName","headNode","resources","load","err","atlas","wFaceID","nodeSizeHeight","contentSize","showSizeHeight","updateUserScore","_this$rollNodes$this$","requestStop","showReward","winScore","winPos","nodeLines","item_x","item_y","_this$rollNodes","pos","updateWinScore","updateFreeState","isBigReward","rewardAniNode","RewardAniNode","showRewardAni","rewardFinish","isReward","_this4","setTimeout","labUserScore","labWinScore","_this5","labRewardPool","addNum","addNumTween","repeat","showGetFreeNum","btnAddBet","interactable","btnDecBet","_this6","nodeShowGetFreeNum","onClickBet","getTotalBet","labBetScore","_this$nodeStartRod$ge","totalBet","MDM_GR_LOGON","MDM_MB_LOGON","CMD_MB_LogonByPhoneNum","writeUint32","writeString","CMD_MB_LogonVisitor","CMD_MB_LogonSuccess","readUint16","cbGender","dwUserID","dwGameID","szAccounts","readString","szNickName","szToken","szUnderWrite","szSession","lUserScore","lDiamond","lLpValues","lTicket","dwLoginType","dwVipLv","dwVipPoint","dwClubPoint","lExperience","dwCurExLevel","dwNextExPoint","lNextExScore","CMD_MB_LogonFailure","lResultCode","readInt32","szDescribeString","CMD_GR_LogonMobile","writeUint16","CMD_GR_LogonFinish","wKindID","wServerID","CMD_GR_LogonSuccess","dwUserRight","dwMasterRight","CMD_GR_LogonFailure","CMD_GR_ConfigServer","wTableCount","wChairCount","wServerType","dwServerRule","CMD_GR_ConfigFinish","MDM_GR_USER","CMD_GR_UserStandUp","CMD_GR_UserEnter","wTableID","wChairID","cbUserStatus","lScore","dwIpAddress","szSign","buffer","byteLength","rpos","tmpSize","tmpCmd","CMD_GR_UserScore","CMD_GR_UserStatus","CMD_GR_RequestFailure","lErrorCode","MDM_GF_FRAME","CMD_GF_UserReady","CMD_GF_NoticeReady","CMD_GF_GameOption","CMD_GF_GameStatus","cbGameStatus","cbAllowLookon","CMD_S_GameScene","readFloat","cbBetIndex","cbLineCount","dTotalGameScore","CMD_GA_RespondError","cbShutDown","szErrorCode","CMD_GA_RespondRoomClose","dwServerID","dwReason","CMD_GR_TableStatus","cbTableLock","cbPlayStatus","CMD_GR_TableInfo","CMD_KN_DetectSocket","bSendOption","onSocketLogonSuccess","setUserID","onSocketLogonFinish","onSocketLogonFail","onSocketConfigEvent","onSocketConfigFinish","onSocketUserEnter","wUserID","isMyself","wRoomUserList","isNeedAdd","userItem","onUpDataTableUser","onSocketUserScore","onSocketUserStatus","roomUserItem","oldstatus","sendExitTable","wChangeDesk","onSocketRequestFailure","onEventGameScene","onMBLogonSuccess","wSzToken","wSzAccounts","onMBLogonFailure","onSocketRespondError","onSocketRespondRoomClose","detectSocket","onSocketGameStatus","onSocketNoticeReady","onSocketTableStatus","onSocketTableInfo","connect","sendPhoneNumLogin","phoneNum","sendStandUpData","curScene","getScene","loadScene","force","GlobalData","wTableUserList","setUserAccountData","userID","tableid","chairid","useritem","_classInstance","PageView","HelpView","_pageIndex","onChangeRuleView","PAGE_COUNT","ruleView","setCurrentPageIndex","onBtnClose","ProgressBar","LoadScene","_enterGameScene","parseUrlData","view","setDesignResolutionSize","ResolutionPolicy","FIXED_WIDTH","loginFinish","labTip","preloadScene","onLoadingProgress","bind","onLoadFinished","completedCount","totalCount","item","progressValue","gameProgress","progress","message","account","token","parmStr","window","location","href","split","forEach","element","parm","_poolReward","_isBigReward","_gameScene","poolReward","gameScene","showPoolReward","showBigReward","showNormalReward","aniNode","poolRewardNode","labScore","poolAni","aniFinshCallBack","bigRewardNode","curScore","addScore","addScoreTween","bigRewardAni","normalRewardNode","_find","normalRewardAni","onDisable","SpriteFrame","SetView","initBtnState","onBtnMusic","frameIndex","btnMusic","normalSprite","btnChangeFrame","onBtnSound","btnSound","onClose"],"mappings":"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","file":"all.js","sourcesContent":["import { _decorator, AudioClip, AudioSource, Component, Node, sys } from 'cc';\r\nimport { globalData } from '../GlobalData';\r\nimport { GameFacadeInstance } from '../GameFacade';\r\nimport { Constants } from '../Constants';\r\nconst { ccclass, property } = _decorator;\r\nconst AUDIO_CONFIG = {\r\n    'start':0,\r\n    'rollstart':1,\r\n    'rollstop':2,\r\n    'bigreward':3,\r\n    'normalreward':4\r\n};\r\nconst MUSIC_KEY = 'SuperFruit_AudioMusic';\r\nconst EFFECT_KEY = 'SuperFruit_AudioEffect';\r\n@ccclass('AudioControl')\r\nexport class AudioControl extends Component {\r\n    @property(AudioSource)\r\n    audioMusic:AudioSource = null;\r\n    @property(AudioSource)\r\n    audioEffect:AudioSource = null;\r\n    @property(AudioClip)\r\n    audioClips:AudioClip[] = [];\r\n    \r\n    _musicEnable:boolean = true;\r\n    _effectEnable:boolean = true;\r\n    start() {\r\n       let musicEnable = sys.localStorage.getItem(MUSIC_KEY);\r\n       if(musicEnable) this._musicEnable = musicEnable==1?true:false;\r\n       let effectEnable = sys.localStorage.getItem(EFFECT_KEY);\r\n       if(effectEnable) this._effectEnable = effectEnable == 1?true:false;       \r\n       if(this._musicEnable) this.audioMusic.play();\r\n    \r\n       globalData.wEffctEnable = this._effectEnable;\r\n       globalData.wMusicEnable = this._musicEnable;\r\n       GameFacadeInstance.registerMediator(this);\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n    protected onDestroy(): void {\r\n        GameFacadeInstance.removeMediator(this.name);\r\n    }\r\n    listNotificationInterests(){\r\n        return[{\r\n                evtType:Constants.GMAENOTIFICATION_ID.SETAUDIOENABLE,\r\n                callback: this.setAudioEnable\r\n\t\t    }\r\n        ]\r\n    }\r\n    playEffect(effectName:string){\r\n        if(!this._effectEnable) return;\r\n        let audioClip = this.audioClips[AUDIO_CONFIG[effectName]];\r\n        if(audioClip){\r\n            this.audioEffect.playOneShot(audioClip);\r\n        }\r\n    }\r\n    setAudioEnable(musicEnable:boolean,effectEnable:boolean){\r\n        if(musicEnable!=this._musicEnable){\r\n            this._musicEnable = musicEnable;\r\n            if(this._musicEnable)  this.audioMusic.play();\r\n            else this.audioMusic.stop();\r\n            sys.localStorage.setItem(MUSIC_KEY, this._musicEnable?1:0);\r\n            globalData.wMusicEnable = this._musicEnable;\r\n        }\r\n        if(effectEnable!=this._effectEnable){\r\n            this._effectEnable = effectEnable;\r\n            sys.localStorage.setItem(EFFECT_KEY,this._effectEnable?1:0);\r\n            globalData.wEffctEnable = this._effectEnable;\r\n        }\r\n    } \r\n}\r\n\r\n\r\n","export class Constants{\r\n    public static LEN_TOKEN    = 512;    //用户token\r\n    public static LEN_MACHINE_ID  = 33; //序列长度\r\n    public static LEN_LOGONFAILURE = 128; //登录失败消息字符长度\r\n    //public static GAMESERVER_ADDR = 'ws://192.168.1.37:6900';\r\n    //正式服\r\n    public static GAMESERVER_ADDR = 'wss://dev.bigerwin.com:6900';\r\n    public static GAME_ID = 522;\r\n    public static SERVER_ID = 137;\r\n    public static LEN_ACCOUNTS\t= 32;   //帐号长度 \r\n    public static LEN_PASSWORD\t= 33;   //密码长度\r\n    public static INVALID_TABLE  = 65535;\r\n    public static INVALID_CHAIR  = 65535;\r\n    public static MAX_LINE_COUNT = 9;\r\n    public static ITEM_X_COUNT = 5; //横坐标图标数量\r\n    public static ITEM_Y_COUNT = 3;\t//纵坐标图标数量\r\n    public static SCORE_RATIO = 100;\r\n    public static MAX_BET_COUNT = 8;  //最大下注个数\r\n    public static ROLL_STATUS = {\r\n        RollNormall_Status:0,       //正常滚动中\r\n        SlowDown_Status:1,          //减速中\r\n        Stop_Status:2               //静止状态\r\n    }\r\n    //游戏状态\r\n    public static GAME_STATUS = {\r\n        GAME_SCENE_FREE:0,\t\t//空闲状态\r\n        GAME_SCENE_WIAT:100,\t//等待状态\r\n        GAME_SCENE_PLAY:101\t    //游戏状态\r\n    }\r\n    public static GMAENOTIFICATION_ID = {\r\n        GAME_LOGIN:1,\r\n        GAME_ENTERGAMESCENE:2,\r\n        GAME_GAMESCENE:3,\r\n        GAME_GAMESTART:4,\r\n        GAME_GAMECONCLUDE:5,\r\n        GAME_SENDREWARDPOOL:6,\r\n        FRUITROLLFINISH:20,\r\n        CLOSEPOPUPVIEW:21,\r\n        SETAUDIOENABLE:22,\r\n    }\r\n    public static USER_STATUS = {\r\n        US_NULL:0x00,      //没有状态\r\n        US_FREE:0x01,      //站立状态\r\n        US_SIT:0x02,       //坐下状态\r\n        US_READY:0x03,     //同意状态\r\n        US_LOOKON:0x04,    //旁观状态\r\n        US_PLAYING:0x05,   //游戏状态\r\n        US_OFFLINE:0x06,   //断线状态\r\n    }\r\n    public static FormatScore(num:number,fnum?:number):string{\r\n        fnum = fnum || 2;\r\n        num = num/this.SCORE_RATIO;\r\n\r\n        if(num == Math.floor(num)){\r\n            //--整数就不需要小数后面的0了\r\n            return num.toString();\r\n        }\r\n        let times = 1;\r\n        for(let i = 1;i<=fnum;i++){\r\n            //不需要小数最末尾的0\r\n            times = times*10;\r\n            if(num*times == Math.floor(num*times)){\r\n                return num.toFixed(i).toString();\r\n            }\r\n        }\r\n        return num.toFixed(fnum).toString();   \r\n    }\r\n}","import { Color, Canvas, UITransform, instantiate, math, Toggle, TextureCube, _decorator, Component, Button, labelAssembler, game, director, Node, Scene, renderer, CameraComponent, Label, ForwardPipeline, RichText } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('internal.DebugViewRuntimeControl')\r\nexport class DebugViewRuntimeControl extends Component {\r\n    @property(Node)\r\n    compositeModeToggle: Node | null = null;\r\n    @property(Node)\r\n    singleModeToggle: Node | null = null;\r\n    @property(Node)\r\n    EnableAllCompositeModeButton: Node | null = null;\r\n\t_single: number = 0;\r\n\r\n    private strSingle: string[] = [\r\n        'No Single Debug',\r\n        'Vertex Color',\r\n        'Vertex Normal',\r\n        'Vertex Tangent',\r\n        'World Position',\r\n        'Vertex Mirror',\r\n        'Face Side',\r\n        'UV0',\r\n        'UV1',\r\n        'UV Lightmap',\r\n        'Project Depth',\r\n        'Linear Depth',\r\n\r\n        'Fragment Normal',\r\n        'Fragment Tangent',\r\n        'Fragment Binormal',\r\n        'Base Color',\r\n        'Diffuse Color',\r\n        'Specular Color',\r\n        'Transparency',\r\n        'Metallic',\r\n        'Roughness',\r\n        'Specular Intensity',\r\n        'IOR',\r\n\r\n        'Direct Diffuse',\r\n        'Direct Specular',\r\n        'Direct All',\r\n        'Env Diffuse',\r\n        'Env Specular',\r\n        'Env All',\r\n        'Emissive',\r\n        'Light Map',\r\n        'Shadow',\r\n        'AO',\r\n\r\n        'Fresnel',\r\n        'Direct Transmit Diffuse',\r\n        'Direct Transmit Specular',\r\n        'Env Transmit Diffuse',\r\n        'Env Transmit Specular',\r\n        'Transmit All',\r\n        'Direct Internal Specular',\r\n        'Env Internal Specular',\r\n        'Internal All',\r\n\r\n        'Fog',\r\n    ];\r\n    private strComposite: string[] = [\r\n        'Direct Diffuse',\r\n        'Direct Specular',\r\n        'Env Diffuse',\r\n        'Env Specular',\r\n        'Emissive',\r\n        'Light Map',\r\n        'Shadow',\r\n        'AO',\r\n\r\n        'Normal Map',\r\n        'Fog',\r\n\r\n        'Tone Mapping',\r\n        'Gamma Correction',\r\n\r\n        'Fresnel',\r\n        'Transmit Diffuse',\r\n        'Transmit Specular',\r\n        'Internal Specular',\r\n        'TT',\r\n    ];\r\n    private strMisc: string[] = [\r\n        'CSM Layer Coloration',\r\n        'Lighting With Albedo',\r\n    ];\r\n\r\n    private compositeModeToggleList: Node[] = [];\r\n    private singleModeToggleList: Node[] = [];\r\n    private miscModeToggleList: Node[] = [];\r\n    private textComponentList: RichText[] = [];\r\n    private labelComponentList: Label[] = [];\r\n    private textContentList: string[] = [];\r\n    private hideButtonLabel: Label;\r\n    start() {\r\n        // get canvas resolution\r\n        const canvas = this.node.parent.getComponent(Canvas);\r\n        if (!canvas) {\r\n            console.error('debug-view-runtime-control should be child of Canvas');\r\n            return;\r\n        }\r\n\r\n        const uiTransform = this.node.parent.getComponent(UITransform);\r\n        const halfScreenWidth = uiTransform.width * 0.5;\r\n        const halfScreenHeight = uiTransform.height * 0.5;\r\n\r\n        let x = -halfScreenWidth + halfScreenWidth * 0.1, y = halfScreenHeight - halfScreenHeight * 0.1;\r\n        const width = 200, height = 20;\r\n\r\n        // new nodes\r\n        const miscNode = this.node.getChildByName('MiscMode');\r\n        const buttonNode = instantiate(miscNode);\r\n        buttonNode.parent = this.node;\r\n        buttonNode.name = 'Buttons';\r\n        const titleNode = instantiate(miscNode);\r\n        titleNode.parent = this.node;\r\n        titleNode.name = 'Titles';\r\n\r\n        // title\r\n        for (let i = 0; i < 2; i++) {\r\n            const newLabel = instantiate(this.EnableAllCompositeModeButton.getChildByName('Label'));\r\n            newLabel.setPosition(x + (i > 0 ? 50 + width * 2 : 150), y, 0.0);\r\n            newLabel.setScale(0.75, 0.75, 0.75);\r\n            newLabel.parent = titleNode;\r\n            const labelComponent = newLabel.getComponent(Label);\r\n            labelComponent.string = i ? '----------Composite Mode----------' : '----------Single Mode----------';\r\n            labelComponent.color = Color.WHITE;\r\n            labelComponent.overflow = 0;\r\n            this.labelComponentList[this.labelComponentList.length] = labelComponent;\r\n        }\r\n\r\n        y -= height;\r\n        // single\r\n        let currentRow = 0;\r\n        for (let i = 0; i < this.strSingle.length; i++, currentRow++) {\r\n            if (i === this.strSingle.length >> 1) {\r\n                x += width;\r\n                currentRow = 0;\r\n            }\r\n            const newNode = i ? instantiate(this.singleModeToggle) : this.singleModeToggle;\r\n            newNode.setPosition(x, y - height * currentRow, 0.0);\r\n            newNode.setScale(0.5, 0.5, 0.5);\r\n            newNode.parent = this.singleModeToggle.parent;\r\n\r\n            const textComponent = newNode.getComponentInChildren(RichText);\r\n            textComponent.string = this.strSingle[i];\r\n            this.textComponentList[this.textComponentList.length] = textComponent;\r\n            this.textContentList[this.textContentList.length] = textComponent.string;\r\n\r\n            newNode.on(Toggle.EventType.TOGGLE, this.toggleSingleMode, this);\r\n\r\n            this.singleModeToggleList[i] = newNode;\r\n        }\r\n\r\n        x += width;\r\n        // buttons\r\n        this.EnableAllCompositeModeButton.setPosition(x + 15, y, 0.0);\r\n        this.EnableAllCompositeModeButton.setScale(0.5, 0.5, 0.5);\r\n        this.EnableAllCompositeModeButton.on(Button.EventType.CLICK, this.enableAllCompositeMode, this);\r\n        this.EnableAllCompositeModeButton.parent = buttonNode;\r\n        let labelComponent = this.EnableAllCompositeModeButton.getComponentInChildren(Label);\r\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\r\n\r\n        const changeColorButton = instantiate(this.EnableAllCompositeModeButton);\r\n        changeColorButton.setPosition(x + 90, y, 0.0);\r\n        changeColorButton.setScale(0.5, 0.5, 0.5);\r\n        changeColorButton.on(Button.EventType.CLICK, this.changeTextColor, this);\r\n        changeColorButton.parent = buttonNode;\r\n        labelComponent = changeColorButton.getComponentInChildren(Label);\r\n        labelComponent.string = 'TextColor';\r\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\r\n\r\n        const HideButton = instantiate(this.EnableAllCompositeModeButton);\r\n        HideButton.setPosition(x + 200, y, 0.0);\r\n        HideButton.setScale(0.5, 0.5, 0.5);\r\n        HideButton.on(Button.EventType.CLICK, this.hideUI, this);\r\n        HideButton.parent = this.node.parent;\r\n        labelComponent = HideButton.getComponentInChildren(Label);\r\n        labelComponent.string = 'Hide UI';\r\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\r\n        this.hideButtonLabel = labelComponent;\r\n\r\n        // misc\r\n        y -= 40;\r\n        for (let i = 0; i < this.strMisc.length; i++) {\r\n            const newNode = instantiate(this.compositeModeToggle);\r\n            newNode.setPosition(x, y - height * i, 0.0);\r\n            newNode.setScale(0.5, 0.5, 0.5);\r\n            newNode.parent = miscNode;\r\n\r\n            const textComponent = newNode.getComponentInChildren(RichText);\r\n            textComponent.string = this.strMisc[i];\r\n            this.textComponentList[this.textComponentList.length] = textComponent;\r\n            this.textContentList[this.textContentList.length] = textComponent.string;\r\n\r\n            const toggleComponent = newNode.getComponent(Toggle);\r\n            toggleComponent.isChecked = i ? true : false;\r\n            newNode.on(Toggle.EventType.TOGGLE, i ? this.toggleLightingWithAlbedo : this.toggleCSMColoration, this);\r\n            this.miscModeToggleList[i] = newNode;\r\n        }\r\n\r\n        // composite\r\n        y -= 150;\r\n        for (let i = 0; i < this.strComposite.length; i++) {\r\n            const newNode = i ? instantiate(this.compositeModeToggle) : this.compositeModeToggle;\r\n            newNode.setPosition(x, y - height * i, 0.0);\r\n            newNode.setScale(0.5, 0.5, 0.5);\r\n            newNode.parent = this.compositeModeToggle.parent;\r\n\r\n            const textComponent = newNode.getComponentInChildren(RichText);\r\n            textComponent.string = this.strComposite[i];\r\n            this.textComponentList[this.textComponentList.length] = textComponent;\r\n            this.textContentList[this.textContentList.length] = textComponent.string;\r\n\r\n            newNode.on(Toggle.EventType.TOGGLE, this.toggleCompositeMode, this);\r\n\r\n            this.compositeModeToggleList[i] = newNode;\r\n        }\r\n    }\r\n\r\n    isTextMatched(textUI, textDescription) : boolean {\r\n        let tempText = new String(textUI);\r\n        const findIndex = tempText.search('>');\r\n        if (findIndex === -1) {\r\n            return textUI === textDescription;\r\n        } else {\r\n            tempText = tempText.substr(findIndex + 1);\r\n            tempText = tempText.substr(0, tempText.search('<'));\r\n            return tempText === textDescription;\r\n        }\r\n    }\r\n    toggleSingleMode(toggle: Toggle) {\r\n        const debugView = director.root!.debugView;\r\n        const textComponent = toggle.getComponentInChildren(RichText);\r\n        for (let i = 0; i < this.strSingle.length; i++) {\r\n            if (this.isTextMatched(textComponent.string, this.strSingle[i])) {\r\n                debugView.singleMode = i;\r\n            }\r\n        }\r\n    }\r\n    toggleCompositeMode(toggle: Toggle) {\r\n        const debugView = director.root!.debugView;\r\n        const textComponent = toggle.getComponentInChildren(RichText);\r\n        for (let i = 0; i < this.strComposite.length; i++) {\r\n            if (this.isTextMatched(textComponent.string, this.strComposite[i])) {\r\n                debugView.enableCompositeMode(i, toggle.isChecked);\r\n            }\r\n        }\r\n    }\r\n    toggleLightingWithAlbedo(toggle: Toggle) {\r\n        const debugView = director.root!.debugView;\r\n        debugView.lightingWithAlbedo = toggle.isChecked;\r\n    }\r\n    toggleCSMColoration(toggle: Toggle) {\r\n        const debugView = director.root!.debugView;\r\n        debugView.csmLayerColoration = toggle.isChecked;\r\n    }\r\n    enableAllCompositeMode(button: Button) {\r\n        const debugView = director.root!.debugView;\r\n        debugView.enableAllCompositeMode(true);\r\n        for (let i = 0; i < this.compositeModeToggleList.length; i++) {\r\n            const toggleComponent = this.compositeModeToggleList[i].getComponent(Toggle);\r\n            toggleComponent.isChecked = true;\r\n        }\r\n\r\n        let toggleComponent = this.miscModeToggleList[0].getComponent(Toggle);\r\n        toggleComponent.isChecked = false;\r\n        debugView.csmLayerColoration = false;\r\n        toggleComponent = this.miscModeToggleList[1].getComponent(Toggle);\r\n        toggleComponent.isChecked = true;\r\n        debugView.lightingWithAlbedo = true;\r\n    }\r\n    hideUI(button: Button) {\r\n        const titleNode = this.node.getChildByName('Titles');\r\n        const activeValue = !titleNode.active;\r\n        this.singleModeToggleList[0].parent.active = activeValue;\r\n        this.miscModeToggleList[0].parent.active = activeValue;\r\n        this.compositeModeToggleList[0].parent.active = activeValue;\r\n        this.EnableAllCompositeModeButton.parent.active = activeValue;\r\n        titleNode.active = activeValue;\r\n        this.hideButtonLabel.string = activeValue ? 'Hide UI' : 'Show UI';\r\n    }\r\n\r\n    private _currentColorIndex = 0;\r\n    private strColor: string[] = [\r\n        '<color=#ffffff>',\r\n        '<color=#000000>',\r\n        '<color=#ff0000>',\r\n        '<color=#00ff00>',\r\n        '<color=#0000ff>',\r\n    ];\r\n    private color: Color[] = [\r\n        Color.WHITE,\r\n        Color.BLACK,\r\n        Color.RED,\r\n        Color.GREEN,\r\n        Color.BLUE,\r\n    ];\r\n    changeTextColor(button: Button) {\r\n        this._currentColorIndex++;\r\n        if (this._currentColorIndex >= this.strColor.length) {\r\n            this._currentColorIndex = 0;\r\n        }\r\n        for (let i = 0; i < this.textComponentList.length; i++) {\r\n            this.textComponentList[i].string = this.strColor[this._currentColorIndex] + this.textContentList[i] + '</color>';\r\n        }\r\n        for (let i = 0; i < this.labelComponentList.length; i++) {\r\n            this.labelComponentList[i].color = this.color[this._currentColorIndex];\r\n        }\r\n    }\r\n\r\n    onLoad() {\r\n    }\r\n    update(deltaTime: number) {\r\n    }\r\n}\r\n","import { _decorator, Component, Node, CCInteger, resources, randomRange, SpriteAtlas, Sprite, UITransform, SpriteFrame, tween, Vec3 } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\nimport { Constants } from '../Constants';\r\nimport { GameFacadeInstance } from '../GameFacade';\r\nconst BOTTOM_HEIGHT = -140;\r\nconst ITEM_HEIGHT = 140;\r\n@ccclass('FruitRollControl')\r\nexport class FruitRollControl extends Component {\r\n    @property(Node)\r\n    rollLayout:Node = null;\r\n    @property(CCInteger)\r\n    moveSpeed = 60;\r\n    @property(CCInteger)\r\n    speedDown = 5;\r\n    @property(CCInteger)\r\n    minSpeed = 50;\r\n    @property(SpriteAtlas)\r\n    fruitSpriteAtlas:SpriteAtlas = null;\r\n    \r\n    m_fruitItemCount:number = 8;\r\n    m_readyEnd:boolean = false;\r\n    m_rollStatus:number = Constants.ROLL_STATUS.Stop_Status;\r\n    m_rollSpeed:number = this.moveSpeed;\r\n    m_checkIndex:number = 0;\r\n    m_resultData:number[] = [];\r\n    start() {\r\n        this.initFruit();\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n    onDestroy() {\r\n        this.unschedule(this.updateRoll);\r\n    }\r\n    //初始化显示的水果节点\r\n    initFruit(){\r\n        if(this.rollLayout.children.length>0){\r\n            this.rollLayout.destroyAllChildren();\r\n        }\r\n        this.m_readyEnd = false;       \r\n        this.m_checkIndex = 0;\r\n        this.m_rollSpeed = this.moveSpeed;\r\n        for(let i = 0;i<this.m_fruitItemCount;i++){\r\n            let fruitName = 'im_fruit_'+Math.floor(randomRange(0,11));\r\n            let frame = this.fruitSpriteAtlas.getSpriteFrame(fruitName);\r\n            if(frame){\r\n                let fruitNode = new Node('fruit_'+i);\r\n                let fruitSpr = fruitNode.addComponent(Sprite);\r\n                fruitSpr.spriteFrame = frame;\r\n                fruitNode.setScale(0.8,0.8);\r\n                this.rollLayout.addChild(fruitNode);\r\n                fruitNode.setPosition(0,BOTTOM_HEIGHT+ITEM_HEIGHT*i);\r\n            }\r\n        }\r\n    }\r\n    updateRoll(){\r\n        if(this.m_rollStatus == Constants.ROLL_STATUS.Stop_Status) return;\r\n        if(this.m_rollStatus == Constants.ROLL_STATUS.SlowDown_Status){\r\n            if(this.m_rollSpeed>this.minSpeed){\r\n                this.m_rollSpeed-=this.speedDown;\r\n                if(this.m_rollSpeed<this.minSpeed) this.m_rollSpeed = this.minSpeed;\r\n            }\r\n        }\r\n        for(let fruitNode of this.rollLayout.children){\r\n            let nodePos = fruitNode.getPosition();\r\n            nodePos.y-=this.m_rollSpeed;\r\n            fruitNode.setPosition(nodePos);\r\n        }   \r\n        let checkFruitNode = this.rollLayout.getChildByName('fruit_'+this.m_checkIndex);\r\n        if(!checkFruitNode) return;\r\n        let nodePos = checkFruitNode.getPosition();\r\n        if(nodePos.y<=(BOTTOM_HEIGHT-ITEM_HEIGHT)){\r\n            nodePos.y = nodePos.y+ITEM_HEIGHT*this.m_fruitItemCount;\r\n            checkFruitNode.setPosition(nodePos);           \r\n            let fruitName = 'im_fruit_'+Math.floor(randomRange(0,11));                   \r\n            let fruitFrame = this.fruitSpriteAtlas.getSpriteFrame(fruitName);\r\n            if(fruitFrame) checkFruitNode.getComponent(Sprite).spriteFrame = fruitFrame; \r\n            this.m_checkIndex+=1;\r\n            if(this.m_checkIndex>=this.m_fruitItemCount) this.m_checkIndex = 0;         \r\n            if(this.m_rollSpeed == this.minSpeed){                          \r\n                if(this.m_checkIndex == 0){\r\n                    this.preLoadResult();\r\n                }\r\n                if(this.m_readyEnd&&this.m_checkIndex==(this.m_fruitItemCount-3)){\r\n                    this.setRollStatus(Constants.ROLL_STATUS.Stop_Status);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    //设置滚动状态\r\n    setRollStatus(rollStatus:number){\r\n        if(rollStatus<Constants.ROLL_STATUS.RollNormall_Status || rollStatus>Constants.ROLL_STATUS.Stop_Status) return;\r\n        if(this.m_rollStatus == rollStatus) return;\r\n        this.m_rollStatus = rollStatus;\r\n        //滚动停止\r\n        if(this.m_rollStatus == Constants.ROLL_STATUS.Stop_Status){\r\n            this.unschedule(this.updateRoll);\r\n            //校准节点位置 最后3个节点显示上下抖动的效果\r\n            let posIndex = 0;\r\n            for(let i = this.m_checkIndex;i<this.m_fruitItemCount;i++){\r\n                let fruitNode = this.rollLayout.getChildByName('fruit_'+i);\r\n                if(fruitNode){\r\n                    fruitNode.setPosition(0,BOTTOM_HEIGHT+ITEM_HEIGHT*(posIndex++));\r\n                    tween(fruitNode)\r\n                         .by(0.2,{position:new Vec3(0,-5,0)})\r\n                         .by(0.2,{position:new Vec3(0,10,0)})\r\n                         .by(0.2,{position:new Vec3(0,-5,0)})\r\n                         .start();\r\n                }\r\n            }\r\n            this.rollLayout.getChildByName('fruit_0').setPosition(0,BOTTOM_HEIGHT+ITEM_HEIGHT*posIndex);\r\n            //通知本轮水果滚动结束 下一轮水果减慢速度 准备停止 \r\n            GameFacadeInstance.sendNotification(Constants.GMAENOTIFICATION_ID.FRUITROLLFINISH);\r\n        }\r\n        //开始滚动\r\n        else if(rollStatus == Constants.ROLL_STATUS.RollNormall_Status){\r\n            this.initFruit();\r\n            this.schedule(this.updateRoll,0.02);\r\n        }\r\n    }\r\n    //提前加载结果\r\n    preLoadResult(){\r\n        for(let i = 0;i<this.m_resultData.length;i++){\r\n            let fruitFrame = this.fruitSpriteAtlas.getSpriteFrame('im_fruit_'+this.m_resultData[i]);\r\n            if(fruitFrame){\r\n                let fruitNode = this.rollLayout.getChildByName('fruit_'+(this.m_fruitItemCount-1-i));\r\n                if(fruitNode){\r\n                    fruitNode.getComponent(Sprite).spriteFrame = fruitFrame;\r\n                } \r\n            }\r\n        }\r\n        this.m_readyEnd = true;\r\n    }\r\n    //设置滚动结果数据\r\n    setResultData(data1:number,data2:number,data3:number){\r\n        this.m_resultData[0] = data1;\r\n        this.m_resultData[1] = data2;\r\n        this.m_resultData[2] = data3;\r\n    }\r\n    //设置水果显示状态\r\n    setShowState(isGray:boolean){\r\n        for(let fruitNode of this.rollLayout.children){\r\n            let frameName = fruitNode.getComponent(Sprite).spriteFrame.name;\r\n            let newFrame = null;\r\n            let newFrameName = null;\r\n            if(isGray) newFrameName = 'im_fruit_gray_'+frameName.substring(frameName.length-1);           \r\n            else newFrameName = 'im_fruit_'+frameName.substring(frameName.length-1); \r\n            if(newFrameName &&newFrameName != frameName) newFrame = this.fruitSpriteAtlas.getSpriteFrame(newFrameName);\r\n            if(newFrame) fruitNode.getComponent(Sprite).spriteFrame = newFrame;\r\n        }\r\n    }\r\n    //中奖的水果高亮显示\r\n    setRewardItem(childIndex:number){\r\n        console.log('高亮水果：',childIndex);\r\n        let fruitSprite = this.rollLayout.getChildByName('fruit_'+(childIndex+4))?.getComponent(Sprite);\r\n        if(fruitSprite){\r\n            let frameName = fruitSprite.spriteFrame.name;\r\n            let newFrameName = 'im_fruit_'+frameName.substring(frameName.length-1);\r\n            if(frameName!=newFrameName){\r\n                let newFrame = this.fruitSpriteAtlas.getSpriteFrame(newFrameName);\r\n                if(newFrame) fruitSprite.spriteFrame = newFrame;\r\n            }  \r\n        }\r\n    }\r\n}\r\n\r\n\r\n","import{gameTableProxy} from \"./model/GameTableProxy\"\r\nimport { gameProxy } from \"./model/GameProxy\";\r\nimport{GameLoginCommand} from\"./controller/GameLoginCommand\"\r\nimport{Constants} from\"./Constants\"\r\nconst global = globalThis;\r\n\r\nlet GameFacade = global.puremvc.define(\r\n    {\r\n        parent: global.puremvc.Facade,\r\n        constructor: function (multitonKey:any) {\r\n            global.puremvc.Facade.call(this, multitonKey);\r\n        }\r\n    },\r\n    {\r\n        initializeModel: function () {\r\n            global.puremvc.Facade.prototype.initializeModel.call(this);\r\n        },\r\n\r\n        initializeView: function () {\r\n            global.puremvc.Facade.prototype.initializeView.call(this);\r\n        },\r\n\r\n        initializeController: function () {\r\n            global.puremvc.Facade.prototype.initializeController.call(this);\r\n        },\r\n\r\n        startup: function () {               \r\n            this.registerCommand(Constants.GMAENOTIFICATION_ID.GAME_LOGIN, GameLoginCommand);\r\n            this.addProxy(new gameTableProxy());\r\n            this.addProxy(new gameProxy());\r\n            this.registerProxy();        \r\n        }\r\n    },\r\n    {\r\n        getInstance: function (multitonKey:any) {\r\n            let instanceMap = global.puremvc.Facade.instanceMap;\r\n            let instance = instanceMap[multitonKey];\r\n            if (instance) {\r\n                return instance;\r\n            } else {\r\n                instance = instanceMap[multitonKey] = new GameFacade(multitonKey);\r\n                instance.startup();\r\n                return instance;\r\n            }\r\n        },\r\n\r\n        NAME: 'GameFacade'\r\n    });\r\nexport let GameFacadeInstance = GameFacade.getInstance('GameFacade');\r\n","import {Constants} from \"../Constants\"\r\nimport {globalData} from \"../GlobalData\"\r\nconst global = globalThis;\r\nexport let GameLoginCommand  = global.puremvc.define(\r\n\t{\r\n\t\tparent: global.puremvc.SimpleCommand\r\n\t},\r\n\t{\r\n\t\texecute: function () {\r\n            console.log(\"登录游戏\");\r\n\t\t\tlet gameProxy = this.facade.retrieveProxy('GameProxy');\r\n\t\t\tlet gameTableProxy = this.facade.retrieveProxy('GameTableProxy');\r\n\t\t\tlet app = global.KBEngine.createApp();\r\n\t\t\tapp.wssAddr = Constants.GAMESERVER_ADDR;\r\n\t\t\tgameProxy.registerNetInterface(app);\r\n\t\t\tgameTableProxy.registerNetInterface(app);\r\n\t\t\t// let wUserData = globalData.getUserData();\r\n\t\t\t// let userId = wUserData.userID;\r\n\t\t\t// let szToken = wUserData.szToken;\r\n\t\t\t//登录游戏\r\n\t\t\t//gameTableProxy.sendPhoneNumLogin('13634120436');\r\n\t\t\tgameTableProxy.sendLogonRoomData();\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tNAME: 'GameLoginCommand'\r\n\t});","import {Constants} from \"../Constants\"\r\nexport let datatypes = {} as any;\r\n//游戏命令\r\nconst MDM_GF_GAME = 1200;\r\n//服务器命令结构\r\nconst SUB_S_GAME_START\t      =100;   //游戏开始\r\nconst SUB_S_GAME_CONCLUDE     =101;   //结束游戏\r\nconst SUB_S_GAME_LOTTERY      =102;  //房间彩金\r\nconst SUB_S_SEND_REWARD_POOL  =107;   //发送奖池\r\n\r\n//游戏开始\r\ndatatypes.CMD_S_GameStart = {\r\n\tmainCmdID: MDM_GF_GAME,\r\n\tsubCmdID: SUB_S_GAME_START,\r\n\targTypes: [\r\n\t\t{\r\n\t\t\tname: 'cbItemInfo', //开奖信息\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'dLineScore',   //游戏积分\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'cbItemType',  //线类型\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'cbItemLineCount',   //线数\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'nGiveAwayCount',   //赠送次数\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'nTotalGiveAwayCount',   //总免费次数\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'cbFreeSpinState',   //0无，1开始，2进行中,3结束\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'dUserTotalWinScore',   //累计赢分\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'nPoolLineCount',   //奖池线数\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'nPoolRewardScore',   //奖池赢分\r\n\t\t}\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\tlet cbItemInfo = [];\r\n\t\tfor(let i= 0;i<Constants.ITEM_Y_COUNT;i++){\r\n\t\t\tcbItemInfo[i] = [];\r\n\t\t\tfor(let n = 0;n<Constants.ITEM_X_COUNT;n++){\r\n\t\t\t\tlet itemInfo = stream.readUint8();\r\n\t\t\t\tcbItemInfo[i].push(itemInfo);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet dLineScore = [];\r\n\t\tfor(let i = 0;i<Constants.MAX_LINE_COUNT;i++){\r\n\t\t\tlet lineScore = stream.readUint64();\r\n\t\t\tdLineScore.push(lineScore);\r\n\t\t}\r\n\t\tlet cbItemType = [];\r\n\t\tfor(let i = 0;i<Constants.MAX_LINE_COUNT;i++){\r\n\t\t\tlet itemType = stream.readUint8();\r\n\t\t\tcbItemType.push(itemType);\r\n\t\t}\r\n\t\tlet cbItemLineCount = [];\r\n\t\tfor(let i = 0;i<Constants.MAX_LINE_COUNT;i++){\r\n\t\t\tlet lineCount = stream.readUint8();\r\n\t\t\tcbItemLineCount.push(lineCount);\r\n\t\t}\r\n\t\tlet nGiveAwayCount = stream.readUint32();\r\n\t\tlet nTotalGiveAwayCount = stream.readUint32();\r\n\t\tlet cbFreeSpinState = stream.readUint8();\r\n\t\tlet dUserTotalWinScore = stream.readUint64();\r\n\t\tlet nPoolLineCount = stream.readUint32();\r\n\t\tlet nPoolRewardScore = stream.readUint32();\r\n\t\targs.push(cbItemInfo, dLineScore, cbItemType, cbItemLineCount,nGiveAwayCount,nTotalGiveAwayCount,cbFreeSpinState,dUserTotalWinScore,nPoolLineCount,nPoolRewardScore);\r\n\t}\r\n};\r\n//游戏结束\r\ndatatypes.CMD_S_GameConclude = {\r\n\tmainCmdID: MDM_GF_GAME,\r\n\tsubCmdID: SUB_S_GAME_CONCLUDE,\r\n\targTypes: [\r\n\t\t\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\r\n\t}\r\n};\r\n//奖池\r\ndatatypes.CMD_S_RewardPool = {\r\n\tmainCmdID: MDM_GF_GAME,\r\n\tsubCmdID: SUB_S_SEND_REWARD_POOL,\r\n\targTypes: [\r\n\t\t{\r\n\t\t\tname: 'PoolNum', //开奖信息\r\n\t\t}\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n        let poolNum = stream.readUint32();\r\n\t\targs.push(poolNum);\r\n\t}\r\n};\r\n//房间彩金\r\ndatatypes.CMD_S_Lottery = {\r\n\tmainCmdID: MDM_GF_GAME,\r\n\tsubCmdID: SUB_S_GAME_LOTTERY,\r\n\targTypes: [\r\n\t\t{\r\n\t\t\tname: 'dLotteryScore', //彩金(前端累加值)\r\n\t\t}\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n        let dLotteryScore = stream.readUint64();\r\n\t\targs.push(dLotteryScore);\r\n\t}\r\n};\r\n//客户端命令结构\r\nconst SUB_C_GAME_START = 100;\t\t\t//游戏开始\r\nconst SUB_C_GIVE_AWAY_START = 101;\t\t//免费游戏开始\r\nconst SUB_C_GAME_CONCLUDE = 102;\t\t//游戏结束\r\n//用户叫分\r\ndatatypes.CMD_C_GameStart = {\r\n\t'mainCmdID': MDM_GF_GAME,\r\n\t'subCmdID': SUB_C_GAME_START,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'cbLineCount',   //押线数量\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'cbBetIndex',  //押线索引\r\n\t\t}\r\n\t],\r\n\twrite2bundle: function (bundle:any, args:any) {\r\n\t\tbundle.writeUint8(args[0]);\r\n\t\tbundle.writeUint8(args[1]);\r\n\t},\r\n\tsize: function () {\r\n\t\treturn 2\r\n\t}\r\n};\r\ndatatypes.CMD_C_GiveAwayStart = {\r\n\t'mainCmdID': MDM_GF_GAME,\r\n\t'subCmdID': SUB_C_GIVE_AWAY_START,\r\n\t'argTypes': [\r\n\t\t\r\n\t],\r\n\twrite2bundle: function (bundle:any, args:any) {\r\n\t\t\r\n\t},\r\n\tsize: function () {\r\n\t\treturn 0\r\n\t}\r\n};\r\ndatatypes.CMD_C_GameConclude = {\r\n\t'mainCmdID': MDM_GF_GAME,\r\n\t'subCmdID': SUB_C_GAME_CONCLUDE,\r\n\t'argTypes': [\r\n\t\t\r\n\t],\r\n\twrite2bundle: function (bundle:any, args:any) {\r\n\t\t\r\n\t},\r\n\tsize: function () {\r\n\t\treturn 0\r\n\t}\r\n};\r\n\r\n\r\n\r\n","import {datatypes} from '../messageDef/GameProtocol'\r\nimport { Constants } from '../Constants';\r\nconst global = globalThis;\r\n    \r\nexport let gameProxy = global.puremvc.define(\r\n\t{\r\n\t\tparent: global.puremvc.Proxy,\r\n\t\tconstructor: function () {\r\n\t\t\tglobal.puremvc.Proxy.call(this, this.constructor.NAME);\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tonRegister: function () {\r\n\t\t\r\n\t\t},\r\n\r\n\t\tregisterNetInterface: function (app:any) {\r\n\t\t\tthis.app = app;\r\n\t\t\tlet net = app.net;\r\n\t\t\tthis.net = net;\r\n\r\n\t\t\tnet.registerServer(this, 'onSubGameStart', datatypes.CMD_S_GameStart);\t\r\n            net.registerServer(this, 'onSubGameConclude', datatypes.CMD_S_GameConclude);\t\r\n            net.registerServer(this, 'onSubRewardPool', datatypes.CMD_S_RewardPool);\t\r\n            net.registerServer(this, 'onSubGameLottery', datatypes.CMD_S_Lottery);\r\n            net.registerClient(this, 'sendGiveAwayStart', datatypes.CMD_C_GiveAwayStart);\r\n            net.registerClient(this, 'sendGameStart', datatypes.CMD_C_GameStart);\r\n            net.registerClient(this, 'sendGameConclude', datatypes.CMD_C_GameConclude);\r\n\t\t},\r\n        //接收网络消息\r\n        onSubGameStart:function(data:any){\r\n            console.log('onSubGameStart');\r\n            this.sendNotification(Constants.GMAENOTIFICATION_ID.GAME_GAMESTART,data);\r\n        },\r\n        onSubGameConclude:function(){\r\n            console.log('onSubGameConclude');\r\n            this.sendNotification(Constants.GMAENOTIFICATION_ID.GAME_GAMECONCLUDE);\r\n        },\r\n        onSubRewardPool:function(PoolNum:number){\r\n            console.log('onSubRewardPool',PoolNum);\r\n            this.sendNotification(Constants.GMAENOTIFICATION_ID.GAME_SENDREWARDPOOL,PoolNum);\r\n        },\r\n        onSubGameLottery:function(dLotteryScore:number){\r\n            console.log('onSubGameLottery',dLotteryScore);\r\n        },\r\n        //发送网络消息\r\n        requestSpin:function(betNum:number, isFree:boolean){\r\n            if(!this.app.socket){\r\n                return;\r\n            }\r\n            if(isFree) this.net.callServer('sendGiveAwayStart');\r\n            else{\r\n                this.net.callServer('sendGameStart',Constants.MAX_LINE_COUNT,betNum);\r\n            }\r\n        },\r\n        requestGameConclude:function(){\r\n            if(!this.app.socket){\r\n                return;\r\n            }\r\n            this.net.callServer('sendGameConclude');\r\n        }\r\n\t},\r\n\t{\r\n\t\tNAME: 'GameProxy'\r\n\t});","import { _decorator, Component, Node, Label, Button, tween, Animation, Sprite, resources, SpriteAtlas, Tween, UITransform, Prefab, EventTouch, input, Input, instantiate, Vec3, Vec2, find, sys } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\nimport { FruitRollControl } from './FruitRollControl';\r\nimport { Constants } from '../Constants';\r\nimport { GameFacadeInstance } from '../GameFacade';\r\nimport { globalData } from '../GlobalData';\r\nimport { RewardAniNode } from './RewardAniNode';\r\nimport { AudioControl } from './AudioControl';\r\nconst ROLLNODE_COUNT = 5;\r\nconst LinePosConfig = [\r\n    [{x:1, y:2}, {x:2, y:2}, {x:3, y:2}, {x:4, y:2}, {x:5, y:2} ],\r\n    [{x:1, y:3}, {x:2, y:3}, {x:3, y:3}, {x:4, y:3}, {x:5, y:3} ],\r\n    [{x:1, y:1}, {x:2, y:1}, {x:3, y:1}, {x:4, y:1}, {x:5, y:1} ],\r\n    [{x:1, y:3}, {x:2, y:2}, {x:3, y:1}, {x:4, y:2}, {x:5, y:3} ],\r\n    [{x:1, y:1}, {x:2, y:2}, {x:3, y:3}, {x:4, y:2}, {x:5, y:1} ],\r\n    [{x:1, y:3}, {x:2, y:3}, {x:3, y:2}, {x:4, y:1}, {x:5, y:1} ],\r\n    [{x:1, y:1}, {x:2, y:1}, {x:3, y:2}, {x:4, y:3}, {x:5, y:3} ],\r\n    [{x:1, y:2}, {x:2, y:1}, {x:3, y:2}, {x:4, y:3}, {x:5, y:2} ],\r\n    [{x:1, y:2}, {x:2, y:3}, {x:3, y:2}, {x:4, y:1}, {x:5, y:2} ],\r\n];\r\n@ccclass('GameScene')\r\nexport class GameScene extends Component {\r\n    @property(Node)\r\n    rollNodes:Node[] = [];\r\n    @property(Node)\r\n    nodeLines:Node[] = [];\r\n    @property(Node)\r\n    nodeUserInfo:Node = null;\r\n    @property(Label)\r\n    labWinScore:Label = null;\r\n    @property(Label)\r\n    labRewardPool:Label = null;\r\n    @property(Node)\r\n    btnSpin:Node = null;\r\n    @property(Node)\r\n    btnFreeSpin:Node = null;\r\n    @property(Node)\r\n    nodeShowGetFreeNum:Node = null;\r\n    @property(Button)\r\n    btnAddBet:Button = null;\r\n    @property(Button)\r\n    btnDecBet:Button = null;\r\n    @property(Label)\r\n    labBetScore:Label = null;\r\n    @property(Node)\r\n    nodeStartRod:Node = null;\r\n    @property(Node)\r\n    rewardAniNode:Node = null;\r\n    @property(Prefab)\r\n    helpView:Prefab = null;\r\n    @property(Prefab)\r\n    setView:Prefab = null;\r\n    @property(AudioControl)\r\n    audioControl:AudioControl = null;\r\n    \r\n    _popUpView:Node = null;\r\n    _lineCount:number[] = [];\r\n    _rollNodeIndex:number = 0;\r\n    _lineWinScore:number[] = [];\r\n    _itemType:number[] = [];\r\n    _itemInfo:number[][] = [];\r\n    _getFreeNum:number = 0;\r\n    _winScore:number = 0;\r\n    _freeNum:number = 0;\r\n    _poolRewardNum:number = 0;\r\n    _poolNum:number = 0;\r\n    _cellScore:number = 0;\r\n    _betScore:number[] = [];\r\n    _betIndex:number = 0;\r\n    _isSpin:boolean = false;\r\n    _maxBetIndex:number = 0;\r\n    _isAuto:boolean = false;\r\n    _isHoldBtn:boolean = false;\r\n    _gameProxy:any = null;\r\n    _gameTableProxy:any = null;\r\n    start() {\r\n        GameFacadeInstance.registerMediator(this);\r\n        this._gameProxy = GameFacadeInstance.retrieveProxy(\"GameProxy\");\r\n        this._gameTableProxy = GameFacadeInstance.retrieveProxy(\"GameTableProxy\");\r\n        let startRodAnimation = this.nodeStartRod.getComponent(Animation);\r\n        if(startRodAnimation){\r\n            startRodAnimation.on(Animation.EventType.FINISHED,function(){\r\n                //滚动起来\r\n                this.setRollNodesStatus(Constants.ROLL_STATUS.RollNormall_Status);\r\n                //网络请求\r\n                this._gameProxy.requestSpin(this._betIndex,(this._freeNum>0));\r\n                //刷新免费次数，抽奖结束后会根据服务端次数重置\r\n                if(this._freeNum>0){\r\n                    this._freeNum-=1;\r\n                    this.updateFreeNum();\r\n                }\r\n            },this);\r\n        }\r\n        this.initUserInfo();\r\n        this.btnSpin.on(Node.EventType.TOUCH_START, this.onBtnSpinTouch, this);\r\n        this.btnSpin.on(Node.EventType.TOUCH_END, this.onBtnSpinTouch, this);\r\n        this.btnFreeSpin.on(Node.EventType.TOUCH_START, this.onBtnSpinTouch, this);\r\n        this.btnFreeSpin.on(Node.EventType.TOUCH_END, this.onBtnSpinTouch, this);\r\n        input.on(Input.EventType.TOUCH_END,this.onTouchEnd,this);\r\n        this._gameTableProxy.sendGameOption();\r\n    }\r\n    protected onLoad(): void {\r\n        if (sys.isMobile) {\r\n            let cameraNode = find('Canvas/Camera');\r\n            //设置相机的本地旋转为90度\r\n            cameraNode.eulerAngles = new Vec3(0, 0, 90);\r\n        }\r\n    }\r\n    update(deltaTime: number) {\r\n\r\n    }\r\n    onDestroy(){\r\n        GameFacadeInstance.removeMediator(this.name);\r\n        Tween.stopAll();\r\n        input.off(Input.EventType.TOUCH_END,this.onTouchEnd,this);\r\n    }\r\n    listNotificationInterests(){\r\n        return[{\r\n                evtType:Constants.GMAENOTIFICATION_ID.FRUITROLLFINISH,\r\n                callback: this.rollFinishCallBack\r\n\t\t    },\r\n            {\r\n                evtType:Constants.GMAENOTIFICATION_ID.CLOSEPOPUPVIEW,\r\n                callback: this.closePopUpView\r\n            },\r\n            {\r\n                evtType:Constants.GMAENOTIFICATION_ID.GAME_GAMESCENE,\r\n                callback: this.onGameScene\r\n            },\r\n            {\r\n                evtType:Constants.GMAENOTIFICATION_ID.GAME_GAMESTART,\r\n                callback: this.onGameStart\r\n            },\r\n            {\r\n                evtType:Constants.GMAENOTIFICATION_ID.GAME_GAMECONCLUDE,\r\n                callback: this.onGameConclude\r\n            },\r\n            {\r\n                evtType:Constants.GMAENOTIFICATION_ID.GAME_SENDREWARDPOOL,\r\n                callback: this.onSendRewardPool\r\n            },\r\n        ]\r\n    }\r\n    onTouchEnd(event: EventTouch){\r\n        if(this._popUpView){\r\n            let popViewRect = this._popUpView.getComponent(UITransform).getBoundingBox();\r\n            let touchPos = event.getUILocation();\r\n            let nodePos = this.node.getComponent(UITransform).convertToNodeSpaceAR(new Vec3(touchPos.x,touchPos.y,0));          \r\n            if(!popViewRect.contains(new Vec2(nodePos.x,nodePos.y))){\r\n                this._popUpView.destroy();\r\n                this._popUpView = null;\r\n            }\r\n        }\r\n    }\r\n    onBtnSpinTouch(event:Event){\r\n        if(this._isSpin && !this._isAuto) return;\r\n        let touchNode = event.target;\r\n        if(event.type == Node.EventType.TOUCH_START){\r\n            this._isHoldBtn = false;\r\n            tween(touchNode)\r\n            .delay(1)\r\n            .call(()=>{\r\n                this._isHoldBtn = true;\r\n            })\r\n            .start();\r\n        }\r\n        else if(event.type == Node.EventType.TOUCH_END){\r\n            Tween.stopAllByTarget(touchNode);\r\n            if(this._isAuto) {\r\n                this._isAuto = false;\r\n                this.updateButtonState();\r\n            }\r\n            else {\r\n                 //长按自动\r\n                if(this._isHoldBtn)\r\n                {  \r\n                    this._isAuto = true;\r\n                    this.updateButtonState();\r\n                }\r\n                this.onClickStart();\r\n            }\r\n        }\r\n    }\r\n    openPopUpView(event:EventTouch, customEventData:string){\r\n        if(this._popUpView) return;\r\n        let popUpView:Node = null;\r\n        if(customEventData == 'HelpView'){\r\n            popUpView = instantiate(this.helpView);\r\n        }\r\n        else if(customEventData == 'SetView'){\r\n            popUpView = instantiate(this.setView);\r\n        }\r\n        if(popUpView){\r\n            this.node.addChild(popUpView);\r\n            popUpView.setSiblingIndex(-1);\r\n            this._popUpView = popUpView;\r\n        }\r\n    }\r\n    closePopUpView(){\r\n        if(this._popUpView){\r\n            this._popUpView.destroy();\r\n            this._popUpView = null;\r\n        }\r\n    }\r\n    onGameScene(data:any){\r\n        this._betIndex = 0;\r\n        this._maxBetIndex = data.cbBetCount;\r\n        this._cellScore = data.lCellScore;\r\n        this._betScore = data.dBetScore;\r\n\r\n        this.updateRewardPool(data.PoolNum);\r\n        this.updateBetScore();\r\n        //断线重连 显示奖励\r\n        if(globalData.wGameStatus == Constants.GAME_STATUS.GAME_SCENE_PLAY){\r\n            //滚动起来\r\n            this.setRollNodesStatus(Constants.ROLL_STATUS.RollNormall_Status);\r\n\r\n            this.onGameStart(data);\r\n        }\r\n        this._gameTableProxy.sendUserReady();\r\n    }\r\n    onGameStart(data:any){\r\n        this._freeNum = data.nTotalGiveAwayCount;\r\n        this._getFreeNum = data.nGiveAwayCount;\r\n        this._winScore = data.dUserTotalWinScore;\r\n        this._poolRewardNum = data.nPoolRewardScore;\r\n        this._itemInfo = data.cbItemInfo;\r\n        this._itemType = data.cbItemType;\r\n        this._lineWinScore = data.dLineScore;\r\n        this._lineCount = data.cbItemLineCount;\r\n        //普通抽奖或免费结束时 加上赢的分数\r\n        console.log(\"onGameStart:\",data);\r\n        if(data.cbFreeSpinState == 0 || data.cbFreeSpinState == 3){\r\n            globalData.wUserScore+=(data.dUserTotalWinScore+data.nPoolRewardScore);\r\n        }\r\n        for(let i = 0;i<Constants.ITEM_X_COUNT;i++){\r\n            this.rollNodes[i].getComponent(FruitRollControl).setResultData(data.cbItemInfo[0][i],data.cbItemInfo[1][i],data.cbItemInfo[2][i]);\r\n        }\r\n        this.setRollNodesStatus(Constants.ROLL_STATUS.SlowDown_Status);\r\n    }\r\n    onGameConclude(){\r\n        //this._gameTableProxy.sendUserReady();\r\n    }\r\n    onSendRewardPool(poolNum:number){\r\n        this.updateRewardPool(poolNum);\r\n    }\r\n    setRollNodesStatus(rollStatus:number){\r\n        if(rollStatus == Constants.ROLL_STATUS.RollNormall_Status){\r\n            for(let i = 0;i<this.rollNodes.length;i++){\r\n                this.rollNodes[i].getComponent(FruitRollControl).setRollStatus(rollStatus);\r\n            }\r\n        }\r\n        else if(rollStatus == Constants.ROLL_STATUS.SlowDown_Status){\r\n            this._rollNodeIndex = 0;\r\n            this.audioControl.playEffect('rollstop');\r\n            this.rollNodes[0].getComponent(FruitRollControl).setRollStatus(rollStatus);\r\n        }\r\n    }\r\n    onClickExit(){\r\n        console.log(\"onClickExit\");\r\n    }\r\n    initUserInfo(){\r\n        let labUserName = this.nodeUserInfo.getChildByName('lab_userName').getComponent(Label);\r\n        if(labUserName) labUserName.string = globalData.wSzNickName;\r\n        let headNode = this.nodeUserInfo.getChildByName('spr_head');\r\n        if(headNode){\r\n            resources.load('avatar',SpriteAtlas,(err, atlas)=>{\r\n                if(err){\r\n                    console.log(err);\r\n                    return;\r\n                }\r\n                let frame = atlas.getSpriteFrame(\"texture/avatar/avatar_min_\"+globalData.wFaceID); \r\n                if(frame) {\r\n                    headNode.getComponent(Sprite).spriteFrame = frame;\r\n                    let nodeSizeHeight = headNode.getComponent(UITransform).contentSize.height;\r\n                    let showSizeHeight = this.nodeUserInfo.getComponent(UITransform).contentSize.height-30;\r\n                    headNode.setScale(showSizeHeight/nodeSizeHeight,showSizeHeight/nodeSizeHeight);\r\n                }\r\n            });\r\n        }\r\n        this.updateUserScore();\r\n    }\r\n    rollFinishCallBack(){\r\n        this.audioControl.playEffect('rollstop');\r\n        this._rollNodeIndex+=1;\r\n        if(this._rollNodeIndex<ROLLNODE_COUNT) {\r\n            console.log('rollFinishCallBack:SlowDown_Status:'+this._rollNodeIndex);\r\n            this.rollNodes[this._rollNodeIndex]?.getComponent(FruitRollControl).setRollStatus(Constants.ROLL_STATUS.SlowDown_Status);\r\n        }\r\n        else{\r\n            console.log('rollFinishCallBack:requestStop');\r\n            this.requestStop();\r\n            this.showReward();\r\n            this._rollNodeIndex = 0;\r\n        }\r\n    }\r\n    //显示奖励\r\n    showReward(){\r\n        //本轮得分\r\n        let winScore = 0;\r\n        //中奖坐标\r\n        let winPos = [];\r\n        for(let i = 0;i<Constants.MAX_LINE_COUNT;i++){\r\n            if(this._lineCount[i] && this._lineCount[i]>0 && this.nodeLines[i]){\r\n                //每轮都取一下本轮得分，因为免费模式不清理总得分\r\n                winScore+=this._lineWinScore[i]; \r\n                //显示线\r\n                this.nodeLines[i].active = true;\r\n                //取中奖连线所包含的坐标\r\n                if(this._lineCount[i] >= 3){\r\n                    if(this._itemType[i] == 1){\r\n                        //免费 不用连续 需要找出这条线上所有的免费图标\r\n                        for(let n = 0;n<Constants.ITEM_X_COUNT;n++){\r\n                            if(LinePosConfig[i][n]){\r\n                                let item_x = LinePosConfig[i][n].x;\r\n                                let item_y = LinePosConfig[i][n].y;\r\n                                if(item_y == 1) item_y = 3;\r\n                                else if(item_y == 3) item_y = 1;\r\n                                if(this._itemInfo[item_y-1][item_x-1] == this._itemType[i]){\r\n                                    winPos.push(LinePosConfig[i][n]);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    else{\r\n                        //非免费 需要连续 只需要找前面几个图标就行了\r\n                        for(let n = 0;n<this._lineCount[i];n++){\r\n                            if(LinePosConfig[i][n]){\r\n                                winPos.push(LinePosConfig[i][n]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n        //高亮中奖图标\r\n        if(winScore>0 || this._getFreeNum>0){\r\n            //先将所有图标置灰\r\n            for(let i = 0;i<Constants.ITEM_X_COUNT;i++){\r\n                this.rollNodes[i].getComponent(FruitRollControl).setShowState(true);\r\n            }\r\n            //中奖图标高亮起来\r\n            for(let pos of winPos){\r\n                this.rollNodes[pos.x-1]?.getComponent(FruitRollControl).setRewardItem(pos.y);\r\n            }\r\n        }\r\n        this.updateUserScore();\r\n        this.updateWinScore();\r\n        this.updateFreeNum();\r\n        this.updateFreeState();\r\n        //显示奖励\r\n        console.log('显示奖励',this._poolRewardNum,winScore,globalData.wUserScore);\r\n        if(this._poolRewardNum>0 || winScore>0){\r\n            //是否大奖\r\n            let singleBetNum = this._cellScore*this._betScore[this._betIndex];\r\n            let isBigReward = (winScore/singleBetNum)>=20;\r\n            //播放音效\r\n            if(isBigReward) {\r\n               //播放大奖音效\r\n               this.audioControl.playEffect('bigreward');\r\n            }\r\n            else {\r\n               //播放普通奖励音效\r\n               this.audioControl.playEffect('normalreward');\r\n            }\r\n            //显示奖励动画\r\n            this.rewardAniNode.getComponent(RewardAniNode).showRewardAni(this._poolRewardNum,winScore,isBigReward,this);\r\n        }\r\n        else{\r\n            this.rewardFinish(false);\r\n        }\r\n    }\r\n    rewardFinish(isReward:boolean = true){\r\n        this._isSpin = false;\r\n        this.updateButtonState();\r\n        //如果是自动 则继续抽奖\r\n        if(this._isAuto){\r\n            if(isReward) this.onClickStart();\r\n            else setTimeout(()=>{this.onClickStart();},2);\r\n        } \r\n    }\r\n    //刷新玩家金币\r\n    updateUserScore(){\r\n        let labUserScore =  this.nodeUserInfo.getChildByName('lab_userScore').getComponent(Label);\r\n        if(labUserScore) labUserScore.string = Constants.FormatScore(globalData.wUserScore);\r\n    }\r\n    //刷新本局得分\r\n    updateWinScore(){\r\n        this.labWinScore.string = Constants.FormatScore(this._winScore);\r\n    }\r\n    //刷新奖池\r\n    updateRewardPool(poolNum:number){\r\n        if(this._poolNum<=0){\r\n            this._poolNum =  poolNum;\r\n            this.labRewardPool.string = Constants.FormatScore(this._poolNum);\r\n        } \r\n        else{\r\n            let addTimes = 50;\r\n            let addNum = (poolNum - this._poolNum)/addTimes;\r\n            let addNumTween  =  tween(this.labRewardPool)\r\n                                .delay(0.05)\r\n                                .call(()=>{\r\n                                    this._poolNum += addNum;\r\n                                    this.labRewardPool.string = Constants.FormatScore(this._poolNum);\r\n                                });\r\n            tween(this.labRewardPool).repeat(addTimes,addNumTween).start();\r\n        } \r\n    }\r\n    //刷新免费次数\r\n    updateFreeNum(){\r\n        this.btnFreeSpin.getComponentInChildren(Label).string = this._freeNum.toString();\r\n    }\r\n    //刷新免费状态\r\n    updateFreeState(){\r\n        if(this._getFreeNum>0){\r\n            //抽中免费次数 展示一下奖励\r\n            this.showGetFreeNum();\r\n        }\r\n        else{\r\n            this.btnSpin.active = (this._freeNum<=0);\r\n            this.btnFreeSpin.active = (this._freeNum>0);\r\n        }\r\n    }\r\n    //刷新按钮状态\r\n    updateButtonState(){\r\n        console.log('刷新按钮状态刷新按钮状态刷新按钮状态刷新按钮状态');\r\n        this.btnAddBet.interactable =  !this._isSpin&&this._freeNum <= 0;\r\n        this.btnDecBet.interactable = !this._isSpin&&this._freeNum <= 0;\r\n        this.nodeStartRod.getComponentInChildren(Button).interactable =  !this._isSpin && !this._isAuto;\r\n        this.btnSpin.getComponent(Button).interactable = !this._isAuto;\r\n        this.btnFreeSpin.getComponent(Button).interactable = !this._isAuto;\r\n    }\r\n    showGetFreeNum(){\r\n        if(this.nodeShowGetFreeNum&&(!this.nodeShowGetFreeNum.active)){\r\n            this.nodeShowGetFreeNum.active = true;\r\n            this.nodeShowGetFreeNum.getComponentInChildren(Label).string = this._getFreeNum.toString();\r\n            tween(this.nodeShowGetFreeNum)\r\n            .delay(1)\r\n            .call(()=>{\r\n                this.nodeShowGetFreeNum.active = false;\r\n                this.btnSpin.active = (this._freeNum<=0);\r\n                this.btnFreeSpin.active = (this._freeNum>0);\r\n            })\r\n            .start();\r\n        }\r\n    }\r\n    //下注\r\n    onClickBet(event:Event, customEventData:string){\r\n        if(customEventData === 'DecBet'){\r\n            this._betIndex-=1;\r\n            if(this._betIndex<0) this._betIndex = this._maxBetIndex;\r\n        }\r\n        else{\r\n            this._betIndex+=1;\r\n            if(this._betIndex>this._maxBetIndex) this._betIndex = 0;\r\n        }\r\n        //刷新下注金币\r\n        this.updateBetScore();\r\n    }\r\n    updateBetScore(){\r\n        let betNum = this.getTotalBet();\r\n        this.labBetScore.string = Constants.FormatScore(betNum);\r\n    }\r\n    getTotalBet():number{\r\n        let betNum = 0;\r\n        console.log('getTotalBet', this._cellScore,this._betScore,this._betIndex);\r\n        if(this._betScore[this._betIndex]){\r\n           betNum = this._cellScore*Constants.MAX_LINE_COUNT*this._betScore[this._betIndex];\r\n        } \r\n        return betNum;\r\n    }\r\n    onClickStart(){\r\n        if(this._isSpin) return;\r\n        if(this._freeNum<=0){\r\n            let totalBet = this.getTotalBet();\r\n            if(globalData.wUserScore<totalBet){\r\n                console.log('金币不足,无法进行游戏');\r\n                if(this._isAuto){\r\n                    this._isAuto = false;\r\n                    this.updateButtonState()\r\n                }\r\n                return;\r\n            }\r\n            //扣除金币\r\n            globalData.wUserScore -=totalBet;\r\n            console.log(\"onClickStart:\",globalData.wUserScore,totalBet);\r\n            this.updateUserScore();\r\n            //非免费模式清空得分\r\n            this._winScore = 0;\r\n            this.updateWinScore();\r\n        }\r\n        this._isSpin = true;\r\n        this.updateButtonState();\r\n        //隐藏上一局中奖线\r\n        for(let i = 0;i<Constants.MAX_LINE_COUNT;i++){\r\n            this.nodeLines[i].active = false;\r\n        }\r\n        //播放开始音效\r\n        this.audioControl.playEffect('start');\r\n        //播放启动杆动画\r\n        this.nodeStartRod.getComponent(Animation)?.play();\r\n    }\r\n    //发送游戏结束\r\n    requestStop(){\r\n        if(this._freeNum>0){\r\n            this._gameTableProxy.sendUserReady();\r\n        }\r\n        else{\r\n            console.log('发送游戏结束');\r\n            this._gameProxy.requestGameConclude();\r\n        }\r\n    }\r\n}\r\n\r\n\r\n","import {Constants} from \"../Constants\"\r\nexport let datatypes = {} as any;\r\n//登录信息\r\nconst MDM_GR_LOGON = 1001; \r\n//请求登录\r\nconst SUB_GR_LOGON_MOBILE = 2;        //手机登录\r\n//登录结果\r\nconst SUB_GR_LOGON_SUCCESS = 100;     //登录成功\r\nconst SUB_GR_LOGON_FAILURE = 101;     //登录失败\r\nconst SUB_GR_LOGON_FINISH  = 102;     //登录完成\r\n//登录信息\r\nconst MDM_MB_LOGON = 2100;\r\n//登录模式\r\nconst SUB_MB_LOGON_VISITOR = 5;\t\t//游客登录\r\nconst SUB_MB_LOGON_PHONENUM = 8;    //手机号登录\r\n//登录结果\r\nconst SUB_MB_LOGON_SUCCESS = 100;\t//登录成功\r\nconst SUB_MB_LOGON_FAILURE = 101;\t//登录失败\r\n\r\n//////************ 计算数据包的大小的时候 一个字符算2个字节********************/\r\n//手机号登录\r\ndatatypes.CMD_MB_LogonByPhoneNum ={\r\n    'mainCmdID': MDM_MB_LOGON,\r\n\t'subCmdID': SUB_MB_LOGON_PHONENUM,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'dwPlazaVersion',  //广场框架版本\r\n\t\t},\r\n        {\r\n            'name': 'dwPlazaResVersion',  //广场资源版本\r\n        },\r\n        {\r\n            'name': 'szChannel',  //渠道名\r\n        },\r\n\t\t{\r\n            'name': 'szPhoneNum',  //手机号\r\n        },\r\n\t\t{\r\n            'name': 'szCode',  //验证码\r\n        },\r\n        {\r\n            'name': 'cbDeviceType',  //设备类型\r\n        },\r\n        {\r\n            'name': 'szMachineID',  //机器标识\r\n        },\r\n        {\r\n            'name': 'szSystemVersion',  //系统版本\r\n        },\r\n        {\r\n            'name': 'szSystemLanguage',  //系统语言\r\n        },\r\n        {\r\n            'name': 'szSystemModel',  //设备型号\r\n        },\r\n        {\r\n            'name': 'szSystemBrand',  //设备厂商\r\n        }\r\n\t],\r\n\twrite2bundle: function (bundle:any, args:any) {\r\n\t\tbundle.writeUint32(args[0]);\r\n        bundle.writeUint32(args[1]);\r\n        bundle.writeString(args[2],Constants.LEN_ACCOUNTS);\r\n\t\tbundle.writeString(args[3],20);\r\n\t\tbundle.writeString(args[4],8);\r\n        bundle.writeUint8(args[5]);\r\n        bundle.writeString(args[6],64);\r\n        bundle.writeString(args[7],20);\r\n        bundle.writeString(args[8],20);\r\n        bundle.writeString(args[9],64);\r\n        bundle.writeString(args[10],64);\r\n\t},\r\n\tsize: function () {\r\n\t\t//计算数据包的大小的时候 一个字符算2个字节\r\n\t\treturn 473+56+Constants.LEN_ACCOUNTS*2\r\n\t}\r\n};\r\n//账号登录\r\ndatatypes.CMD_MB_LogonVisitor ={\r\n    'mainCmdID': MDM_MB_LOGON,\r\n\t'subCmdID': SUB_MB_LOGON_VISITOR,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'dwPlazaVersion',  //广场框架版本\r\n\t\t},\r\n        {\r\n            'name': 'dwPlazaResVersion',  //广场资源版本\r\n        },\r\n        {\r\n            'name': 'szChannel',  //渠道名\r\n        },\r\n        {\r\n            'name': 'cbDeviceType',  //设备类型\r\n        },\r\n        {\r\n            'name': 'szMachineID',  //机器标识\r\n        },\r\n        {\r\n            'name': 'szSystemVersion',  //系统版本\r\n        },\r\n        {\r\n            'name': 'szSystemLanguage',  //系统语言\r\n        },\r\n        {\r\n            'name': 'szSystemModel',  //设备型号\r\n        },\r\n        {\r\n            'name': 'szSystemBrand',  //设备厂商\r\n        }\r\n\t],\r\n\twrite2bundle: function (bundle:any, args:any) {\r\n\t\tbundle.writeUint32(args[0]);\r\n        bundle.writeUint32(args[1]);\r\n        bundle.writeString(args[2],Constants.LEN_ACCOUNTS);\r\n        bundle.writeUint8(args[3]);\r\n        bundle.writeString(args[4],64);\r\n        bundle.writeString(args[5],20);\r\n        bundle.writeString(args[6],20);\r\n        bundle.writeString(args[7],64);\r\n        bundle.writeString(args[8],64);\r\n\t},\r\n\tsize: function () {\r\n\t\t//计算数据包的大小的时候 一个字符算2个字节\r\n\t\treturn 473+Constants.LEN_ACCOUNTS*2\r\n\t}\r\n};\r\n//登录成功\r\ndatatypes.CMD_MB_LogonSuccess ={\r\n    'mainCmdID': MDM_MB_LOGON,\r\n\t'subCmdID': SUB_MB_LOGON_SUCCESS,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'wFaceID',  //头像标识\r\n\t\t},\r\n        {\r\n            'name': 'cbGender',  //用户性别\r\n        },\r\n        {\r\n            'name': 'dwUserID',  //用户ID\r\n        },\r\n        {\r\n            'name': 'dwGameID',  //游戏ID\r\n        },\r\n        {\r\n            'name': 'szAccounts',  //用户帐号\r\n        },\r\n        {\r\n            'name': 'szNickName',  //用户昵称\r\n        },\r\n        {\r\n            'name': 'szToken',  //token\r\n        },\r\n        {\r\n            'name': 'szUnderWrite',  //个性签名\r\n        },\r\n        {\r\n            'name': 'szSession',  //session\r\n        },\r\n        {\r\n            'name': 'lUserScore',  //游戏币\r\n        },\r\n        {\r\n            'name': 'lDiamond',  //钻石\r\n        },\r\n        {\r\n            'name': 'lLpValues',  //Lp值\r\n        },\r\n        {\r\n            'name': 'lTicket',  //奖券\r\n        },\r\n        {\r\n            'name': 'dwLoginType',  //登录方式\r\n        },\r\n        {\r\n            'name': 'dwVipLv',  //VIP等级\r\n        },\r\n        {\r\n            'name': 'dwVipPoint',  //VIP点\r\n        },\r\n        {\r\n            'name': 'dwClubPoint',  //俱乐部点\r\n        },\r\n        {\r\n            'name': 'lExperience',  //当前经验值(非累计值)\r\n        },\r\n        {\r\n            'name': 'dwCurExLevel',  //当前的经验等级\r\n        },\r\n        {\r\n            'name': 'dwNextExPoint',  //升级下一等级需要的值\r\n        },\r\n        {\r\n            'name': 'lNextExScore',  //下一等级的奖励\r\n        }\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\tlet wFaceID = stream.readUint16();\r\n\t\tlet cbGender = stream.readUint8();    \r\n\t\tlet dwUserID = stream.readUint32();  \r\n        let dwGameID = stream.readUint32(); \r\n        let szAccounts = stream.readString(Constants.LEN_ACCOUNTS); \r\n        let szNickName = stream.readString(Constants.LEN_ACCOUNTS); \r\n        let szToken = stream.readString(Constants.LEN_PASSWORD); \r\n        let szUnderWrite = stream.readString(32); \r\n        let szSession = stream.readString(Constants.LEN_PASSWORD); \r\n        let lUserScore = stream.readUint64(); \r\n        let lDiamond = stream.readUint64(); \r\n        let lLpValues = stream.readUint64(); \r\n        let lTicket = stream.readUint64(); \r\n        let dwLoginType = stream.readUint32(); \r\n        let dwVipLv = stream.readUint32(); \r\n        let dwVipPoint = stream.readUint32(); \r\n        let dwClubPoint = stream.readUint32(); \r\n        let lExperience = stream.readUint64(); \r\n        let dwCurExLevel = stream.readUint32(); \r\n        let dwNextExPoint = stream.readUint64(); \r\n        let lNextExScore = stream.readUint32(); \r\n\t\targs.push(wFaceID, cbGender, dwUserID,dwGameID,szAccounts,szNickName,szToken,szUnderWrite,szSession,lUserScore,lDiamond,lLpValues,lTicket,dwLoginType,dwVipLv,\r\n            dwVipPoint,dwClubPoint,lExperience,dwCurExLevel,dwNextExPoint,lNextExScore\r\n            );\r\n\t}\r\n};\r\n//登录失败\r\ndatatypes.CMD_MB_LogonFailure = {\r\n\t'mainCmdID': MDM_MB_LOGON,\r\n\t'subCmdID': SUB_MB_LOGON_FAILURE,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'lResultCode',   //错误代码\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'szDescribeString',   //描述消息\r\n\t\t}\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\tlet lResultCode = stream.readInt32();\r\n\t\tlet szDescribeString = stream.readString(128);   \r\n\t\targs.push(lResultCode, szDescribeString);\r\n\t}\r\n};\r\n\r\n\r\n//手机登陆\r\ndatatypes.CMD_GR_LogonMobile = {\r\n\t'mainCmdID': MDM_GR_LOGON,\r\n\t'subCmdID': SUB_GR_LOGON_MOBILE,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'wGameID',  //游戏标识\r\n\t\t},\r\n        {\r\n            'name': 'dwProcessVersion',  //进程版本\r\n        },\r\n        {\r\n            'name': 'cbDeviceType',  //设备类型\r\n        },\r\n        {\r\n            'name': 'dwGroupID',  //分组ID\r\n        },\r\n        {\r\n            'name': 'dwServerID',  //房间ID\r\n        },\r\n        {\r\n            'name': 'dwUserID',  //用户ID\r\n        },\r\n        {\r\n            'name': 'szToken',  //token\r\n        },\r\n        {\r\n            'name': 'szMachineID',  //机器标识\r\n        },\r\n\t\t{\r\n            'name': 'szAccount',  //账号uid\r\n        }\r\n\t],\r\n\twrite2bundle: function (bundle:any, args:any) {\r\n\t\tbundle.writeUint16(args[0]);\r\n        bundle.writeUint32(args[1]);\r\n        bundle.writeUint8(args[2]);\r\n        bundle.writeUint32(args[3]);\r\n        bundle.writeUint32(args[4]);\r\n        bundle.writeUint32(args[5]);\r\n        bundle.writeString(args[6],Constants.LEN_TOKEN);\r\n        bundle.writeString(args[7],Constants.LEN_MACHINE_ID);\r\n\t\tbundle.writeString(args[8],Constants.LEN_ACCOUNTS);\r\n\t},\r\n\tsize: function () {\r\n\t\treturn 19+(Constants.LEN_TOKEN+Constants.LEN_MACHINE_ID+Constants.LEN_ACCOUNTS)*2\r\n\t}\r\n};\r\n// 登录完成\r\ndatatypes.CMD_GR_LogonFinish = {\r\n\t'mainCmdID': MDM_GR_LOGON,\r\n\t'subCmdID': SUB_GR_LOGON_FINISH,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'dwUserID',\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'wKindID',   //游戏类型\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'wServerID',  //服务器ID\r\n\t\t}\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\tlet dwUserID = stream.readUint32();\r\n\t\tlet wKindID = stream.readUint16();    \r\n\t\tlet wServerID = stream.readUint16();  \r\n\t\targs.push(dwUserID, wKindID, wServerID);\r\n\t}\r\n};\r\n//登录成功\r\ndatatypes.CMD_GR_LogonSuccess = {\r\n\t'mainCmdID': MDM_GR_LOGON,\r\n\t'subCmdID': SUB_GR_LOGON_SUCCESS,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'dwUserID',  //用户 I D\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'dwUserRight',   //用户权限\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'dwMasterRight',  //管理权限\r\n\t\t}\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\tlet dwUserID = stream.readUint32();\r\n\t\tlet dwUserRight = stream.readUint32();    \r\n\t\tlet dwMasterRight = stream.readUint32();  \r\n\t\targs.push(dwUserID, dwUserRight, dwMasterRight);\r\n\t}\r\n};\r\n//登录失败\r\ndatatypes.CMD_GR_LogonFailure = {\r\n\t'mainCmdID': MDM_GR_LOGON,\r\n\t'subCmdID': SUB_GR_LOGON_FAILURE,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'lErrorCode',  //错误代码\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'wKindID',   //游戏id\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'wServerID',  //房间id\r\n\t\t},\r\n        {\r\n\t\t\t'name': 'szDescribeString',  //描述信息\r\n\t\t}\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\tlet dwUserID = stream.readInt32();\r\n\t\tlet wKindID = stream.readUint16();    \r\n\t\tlet wServerID = stream.readUint16();  \r\n        let szDescribeString = stream.readString(Constants.LEN_LOGONFAILURE);  \r\n\t\targs.push(dwUserID, wKindID, wServerID,szDescribeString);\r\n\t}\r\n};\r\n//配置信息\r\nconst MDM_GR_CONFIG         = 1002;\r\nconst SUB_GR_CONFIG_COLUMN   = 100;      //列表配置\r\nconst SUB_GR_CONFIG_SERVER   = 101;      //房间配置\r\nconst SUB_GR_CONFIG_PROPERTY = 102;      //道具配置\r\nconst SUB_GR_CONFIG_FINISH   = 103;      //配置完成\r\n//房间配置\r\ndatatypes.CMD_GR_ConfigServer = {\r\n\t'mainCmdID': MDM_GR_CONFIG,\r\n\t'subCmdID': SUB_GR_CONFIG_SERVER,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'wTableCount',  //桌子数目\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'wChairCount',   //椅子数目\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'wServerType',  //房间类型\r\n\t\t},\r\n        {\r\n\t\t\t'name': 'dwServerRule',  //房间规则\r\n\t\t}\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\tlet wTableCount = stream.readUint16();\r\n\t\tlet wChairCount = stream.readUint16();    \r\n\t\tlet wServerType = stream.readUint16();  \r\n        let dwServerRule = stream.readUint32();  \r\n\t\targs.push(wTableCount, wChairCount, wServerType,dwServerRule);\r\n\t}\r\n};\r\ndatatypes.CMD_GR_ConfigFinish = {\r\n\t'mainCmdID': MDM_GR_CONFIG,\r\n\t'subCmdID': SUB_GR_CONFIG_FINISH,\r\n\t'argTypes': [\r\n\t\t\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\r\n\t}\r\n};\r\n//用户命令\r\nconst MDM_GR_USER = 1003;\r\nconst SUB_GR_USER_STANDUP = 4\t      //起立请求\r\nconst SUB_GR_USER_ENTER  = 100;       //用户进入\r\nconst SUB_GR_USER_SCORE  = 101;       //用户分数\r\nconst SUB_GR_USER_STATUS = 102;       //用户状态\r\nconst SUB_GR_REQUEST_FAILURE = 103;   //请求失败\r\nconst SUB_GR_USER_EX_REWARD  = 105;   //游戏经验等级\r\nconst SUB_GR_USER_EX_PROGRESS = 106;  //经验等级进度条\r\nconst SUB_GR_PUSHUSERPIG     = 107;   //存钱罐 \r\n//附件包\r\nconst DTP_GR_NICK_NAME      = 10;     //用户昵称\r\nconst DTP_GR_UNDER_WRITE    = 12;     //个性签名\r\n//起立请求\r\ndatatypes.CMD_GR_UserStandUp = {\r\n\t'mainCmdID': MDM_GR_USER,\r\n\t'subCmdID': SUB_GR_USER_STANDUP,\r\n\t'argTypes': [\r\n\t\t\r\n\t],\r\n\twrite2bundle: function (bundle:any, args:any) {\r\n\t\tbundle.writeUint16(args[0]);\r\n        bundle.writeUint16(args[1]);\r\n        bundle.writeUint8(args[2]);\r\n\t},\r\n\tsize: function () {\r\n\t\treturn 5\r\n\t}\r\n};\r\n//用户信息\r\ndatatypes.CMD_GR_UserEnter = {\r\n\t'mainCmdID': MDM_GR_USER,\r\n\t'subCmdID': SUB_GR_USER_ENTER,\r\n\t'argTypes': [\r\n        //用户属性\r\n\t\t{\r\n\t\t\t'name': 'dwGameID',  //游戏ID\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'dwUserID',   //用户ID\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'wFaceID',  //头像索引\r\n\t\t},\r\n        {\r\n\t\t\t'name': 'cbGender',  //用户性别\r\n\t\t},\r\n        //用户状态\r\n        {\r\n\t\t\t'name': 'wTableID',  //桌子索引\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'wChairID',   //椅子索引\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'cbUserStatus',  //用户状态\r\n\t\t},\r\n        //积分信息\r\n        {\r\n\t\t\t'name': 'lScore',  //用户分数\r\n\t\t},\r\n        {\r\n\t\t\t'name': 'lDiamond',  //用户钻石\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'lExperience',   //用户经验\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'lLpValues',  //LP值\r\n\t\t},\r\n        {\r\n\t\t\t'name': 'lTicket',  //奖券\r\n\t\t},\r\n        //vip点\r\n        {\r\n\t\t\t'name': 'dwVipLv',  //VIP等级\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'dwVipPoint',   //VIP点\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'dwClubPoint',  //俱乐部点\r\n\t\t},\r\n        //游戏信息\r\n        {\r\n\t\t\t'name': 'dwCurExLevel',  //当前的经验等级\r\n\t\t},\r\n        {\r\n\t\t\t'name': 'dwNextExPoint',  //下一个等级经验值\r\n\t\t},\r\n        {\r\n\t\t\t'name': 'dwIpAddress',  //用户地址\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'szNickName',  //用户昵称\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'szSign',  //个性签名\r\n\t\t}\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\tlet dwGameID = stream.readUint32();\r\n\t\tlet dwUserID = stream.readUint32();    \r\n\t\tlet wFaceID = stream.readUint16();  \r\n        let cbGender = stream.readUint8(); \r\n        let wTableID = stream.readUint16();\r\n\t\tlet wChairID = stream.readUint16();    \r\n\t\tlet cbUserStatus = stream.readUint8();  \r\n        let lScore = stream.readUint64(); \r\n        let lDiamond = stream.readUint64();\r\n\t\tlet lExperience = stream.readUint64();    \r\n\t\tlet lLpValues = stream.readUint64();  \r\n        let lTicket = stream.readUint64(); \r\n        let dwVipLv = stream.readUint32();\r\n\t\tlet dwVipPoint = stream.readUint32();    \r\n\t\tlet dwClubPoint = stream.readUint32();  \r\n        let dwCurExLevel = stream.readUint32(); \r\n        let dwNextExPoint = stream.readUint32();\r\n\t\tlet dwIpAddress = stream.readUint32(); \r\n\t\tlet szNickName = \"\";\r\n\t\tlet szSign = \"\";\r\n\t\t//附加包\t\t\r\n        for(let i = 0;i < 2;i++){\r\n\t\t\tlet byteSize = stream.buffer.byteLength - stream.rpos;\r\n            if(byteSize>0){\r\n\t\t\t\tlet tmpSize = stream.readUint16();\r\n\t\t\t\tlet tmpCmd = stream.readUint16();\r\n\t\t\t\tif(tmpCmd == DTP_GR_NICK_NAME){\r\n\t\t\t\t\tszNickName = stream.readString(tmpSize/2);\r\n\t\t\t\t\tif(szNickName === \"\") szNickName = \"player\";\r\n\t\t\t\t}\r\n\t\t\t\telse if(tmpCmd == DTP_GR_UNDER_WRITE){\r\n\t\t\t\t\tszSign = stream.readString(tmpSize/2);\r\n\t\t\t\t\tif(szSign === \"\") szSign = \"empty\";\r\n\t\t\t\t}\r\n\t\t\t\telse if(tmpCmd == 0) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tfor(let i = 1;i<=tmpSize;i++){\r\n\t\t\t\t\t\tif(!stream.readUint8()){\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\targs.push(dwGameID, dwUserID, wFaceID,cbGender,wTableID,wChairID,cbUserStatus,lScore,lDiamond,lExperience,lLpValues,\r\n            lTicket,dwVipLv,dwVipPoint,dwClubPoint,dwCurExLevel,dwNextExPoint,dwIpAddress,szNickName,szSign);\r\n\t}\r\n};\r\n//用户积分\r\ndatatypes.CMD_GR_UserScore = {\r\n\t'mainCmdID': MDM_GR_USER,\r\n\t'subCmdID': SUB_GR_USER_SCORE,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'dwUserID',  //用户ID\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'lScore',   //用户分数\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'lDiamond',  //钻石\r\n\t\t},\r\n        {\r\n\t\t\t'name': 'lLpValues',  //LP值\r\n\t\t},\r\n        {\r\n\t\t\t'name': 'lTicket',  //奖券\r\n\t\t}\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\tlet dwUserID = stream.readUint32();\r\n\t\tlet lScore = stream.readUint64();    \r\n\t\tlet lDiamond = stream.readUint64();  \r\n        let lLpValues = stream.readUint64();  \r\n        let lTicket = stream.readUint64();  \r\n\t\targs.push(dwUserID, lScore, lDiamond,lLpValues,lTicket);\r\n\t}\r\n};\r\n//用户状态\r\ndatatypes.CMD_GR_UserStatus = {\r\n\t'mainCmdID': MDM_GR_USER,\r\n\t'subCmdID': SUB_GR_USER_STATUS,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'dwUserID',  //用户ID\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'wTableID',   //桌子索引\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'wChairID',  //椅子索引\r\n\t\t},\r\n        {\r\n\t\t\t'name': 'cbUserStatus',  //用户状态\r\n\t\t}\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\tlet dwUserID = stream.readUint32();\r\n\t\tlet wTableID = stream.readUint16();    \r\n\t\tlet wChairID = stream.readUint16();  \r\n        let cbUserStatus = stream.readUint8();  \r\n\t\targs.push(dwUserID, wTableID, wChairID,cbUserStatus);\r\n\t}\r\n};\r\n//请求失败\r\ndatatypes.CMD_GR_RequestFailure = {\r\n\t'mainCmdID': MDM_GR_USER,\r\n\t'subCmdID': SUB_GR_REQUEST_FAILURE,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'lErrorCode',  //错误代码\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'szDescribeString',   //描述信息\r\n\t\t}\r\n\t\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\tlet lErrorCode = stream.readUint32();\r\n\t\tlet szDescribeString = stream.readString(256);     \r\n\t\targs.push(lErrorCode, szDescribeString);\r\n\t}\r\n};\r\n\r\nconst MDM_GF_FRAME = 1100;\r\nconst SUB_GF_GAME_OPTION = 1;\t    //游戏配置\r\nconst SUB_GF_USER_READY\t= 2;\t\t//用户准备\r\n//状态定义\r\nconst SUB_GF_GAME_STATUS\t= 100;\t //游戏状态\r\nconst SUB_GF_GAME_SCENE     = 101;   //游戏场景\r\n//通知玩家准备\r\nconst SUB_GF_NOTICE_READY\t= 502;\t//通知玩家准备\r\n\r\ndatatypes.CMD_GF_UserReady = {\r\n\t'mainCmdID': MDM_GF_FRAME,\r\n\t'subCmdID': SUB_GF_USER_READY,\r\n\t'argTypes': [\r\n\t\t\r\n\t],\r\n\twrite2bundle: function (bundle:any, args:any) {\r\n\t\t\r\n\t},\r\n\tsize: function () {\r\n\t\treturn 0\r\n\t}\r\n};\r\ndatatypes.CMD_GF_NoticeReady = {\r\n\t'mainCmdID': MDM_GF_FRAME,\r\n\t'subCmdID': SUB_GF_NOTICE_READY,\r\n\t'argTypes': [\r\n\t\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\t\r\n\t}\r\n};\r\n//游戏配置\r\ndatatypes.CMD_GF_GameOption = {\r\n\t'mainCmdID': MDM_GF_FRAME,\r\n\t'subCmdID': SUB_GF_GAME_OPTION,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\tname: 'cbAllowLookon',    //旁观标志\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'dwFrameVersion',    //框架版本\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'dwClientVersion',    //游戏版本\r\n\t\t}\r\n\t],\r\n\twrite2bundle: function (bundle:any, args:any) {\r\n\t\tbundle.writeUint8(args[0]);\r\n        bundle.writeUint32(args[1]);\r\n        bundle.writeUint32(args[2]);\r\n\t},\r\n\tsize: function () {\r\n\t\treturn 9\r\n\t}\r\n};\r\n//游戏状态\r\ndatatypes.CMD_GF_GameStatus = {\r\n\t'mainCmdID': MDM_GF_FRAME,\r\n\t'subCmdID': SUB_GF_GAME_STATUS,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'cbGameStatus',  //游戏状态\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'cbAllowLookon',   //旁观标志\r\n\t\t}\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\tlet cbGameStatus = stream.readUint8();\r\n\t\tlet cbAllowLookon = stream.readUint8();    \r\n\t\targs.push(cbGameStatus, cbAllowLookon);\r\n\t}\r\n};\r\n//场景消息\r\ndatatypes.CMD_S_GameScene = {\r\n\tmainCmdID: MDM_GF_FRAME,\r\n\tsubCmdID: SUB_GF_GAME_SCENE,\r\n\targTypes: [\r\n\t\t{\r\n\t\t\tname: 'lCellScore',    //基础积分\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'cbBetCount',  //下注数量\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'dBetScore',   //下注大小\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'cbBetIndex',  //押线索引\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'dLotteryScore',   //房间彩金\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'PoolNum',  //奖池数量\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'cbLineCount',     //押线数量\r\n\t\t},\r\n        {\r\n\t\t\tname: 'dLineScore',   //线得分  \r\n\t\t},\r\n        {\r\n\t\t\tname: 'cbItemType',   //线类型\r\n\t\t},\r\n        {\r\n\t\t\tname: 'cbItemLineCount',    //线数\r\n\t\t},\r\n        {\r\n\t\t\tname: 'cbItemInfo',   //开奖信息\r\n\t\t},\r\n        {\r\n\t\t\tname: 'nGiveAwayCount',   //赠送次数\r\n\t\t},\r\n        {\r\n\t\t\tname: 'nTotalGiveAwayCount',  //总免费次数\r\n\t\t},\r\n        {\r\n\t\t\tname: 'cbFreeSpinState',  //0无，1开始，2进行中,3结束\r\n\t\t},\r\n        {\r\n\t\t\tname: 'dUserTotalWinScore',  //累计赢分\r\n\t\t},\r\n        {\r\n\t\t\tname: 'dTotalGameScore',  //游戏总分\r\n\t\t},\r\n        {\r\n\t\t\tname: 'nPoolLineCount',   //奖池线数\r\n\t\t},\r\n        {\r\n\t\t\tname: 'nPoolRewardScore',  //奖池赢分\r\n\t\t}\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\t//let byteSize = stream.buffer.byteLength - stream.rpos;\r\n            //if(byteSize>0){\r\n\t\tlet lCellScore = stream.readUint64();\r\n\t\tlet cbBetCount = stream.readUint8();\r\n\t\tlet dBetScore = [];\r\n\t\tfor(let i = 0;i<Constants.MAX_BET_COUNT;i++){\r\n\t\t\tdBetScore[i] = stream.readFloat();\r\n\t\t}\r\n\r\n\t\tlet cbBetIndex = stream.readUint8();\r\n\t\tlet dLotteryScore = stream.readUint64();\r\n\t\tlet PoolNum = stream.readUint32();\r\n\t\t\r\n\t\tlet cbLineCount = 0;\r\n        let dLineScore = [];\r\n\t\tlet cbItemType = [];\r\n\t\tlet cbItemInfo = [];\r\n\t\tlet cbItemLineCount = [];\r\n\t\tlet nGiveAwayCount = 0;\r\n\t\tlet nTotalGiveAwayCount = 0;\r\n        let cbFreeSpinState = 0;\r\n        let dUserTotalWinScore = 0;\r\n\t\tlet dTotalGameScore = 0;\r\n\t\tlet nPoolLineCount = 0;\r\n\t\tlet nPoolRewardScore = 0;\r\n\t\tlet byteSize = stream.buffer.byteLength - stream.rpos;\r\n        if(byteSize>0){\r\n\t\t\tcbLineCount = stream.readUint8();\r\n\t\t\tfor(let i = 0;i<Constants.MAX_LINE_COUNT;i++){\r\n\t\t\t\tdLineScore[i] = stream.readUint64();\r\n\t\t\t}\r\n\t\t\tfor(let i = 0;i<Constants.MAX_LINE_COUNT;i++){\r\n\t\t\t\tcbItemType[i] = stream.readUint8();\r\n\t\t\t}\r\n\t\t\tfor(let i = 0;i<Constants.MAX_LINE_COUNT;i++){\r\n\t\t\t\tcbItemLineCount[i] = stream.readUint8();\r\n\t\t\t}\r\n\t\t\tfor(let i = 0;i<Constants.ITEM_Y_COUNT;i++){\r\n\t\t\t\tcbItemInfo[i] = [];\r\n\t\t\t\tfor(let n = 0;n<Constants.ITEM_X_COUNT;n++){\r\n\t\t\t\t\tcbItemInfo[i][n] = stream.readUint8();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tnGiveAwayCount = stream.readUint32();\r\n\t\t\tnTotalGiveAwayCount = stream.readUint32();\r\n\t\t\tcbFreeSpinState = stream.readUint8();\r\n\t\t\tdUserTotalWinScore = stream.readUint64();\r\n\t\t\tdTotalGameScore = stream.readUint64();\r\n\t\t\tnPoolLineCount = stream.readUint32();\r\n\t\t\tnPoolRewardScore = stream.readUint32();\r\n\t    }\r\n\t\targs.push(lCellScore, cbBetCount, dBetScore, cbBetIndex, dLotteryScore, PoolNum,cbLineCount,dLineScore,cbItemType,cbItemLineCount,\r\n            cbItemInfo,nGiveAwayCount,nTotalGiveAwayCount,cbFreeSpinState,dUserTotalWinScore,dTotalGameScore,nPoolLineCount,nPoolRewardScore\r\n            );\r\n\t}\r\n};\r\n//网关命令\r\nconst MDM_GA_GATESERVER               = 3003\r\nconst SUB_GA_RESPOND_ERROR            = 1   \r\nconst SUB_GA_RESPOND_ROOMCLOSE        = 5\r\ndatatypes.CMD_GA_RespondError = {\r\n\t'mainCmdID': MDM_GA_GATESERVER,\r\n\t'subCmdID': SUB_GA_RESPOND_ERROR,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'cbShutDown',  //是否断开网络,默认0断开，非0不断\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'szErrorCode',   //错误信息\r\n\t\t}\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\tlet cbShutDown = stream.readUint8();\r\n\t\tlet szErrorCode = stream.readString(128);    \r\n\t\targs.push(cbShutDown, szErrorCode);\r\n\t}\r\n};\r\ndatatypes.CMD_GA_RespondRoomClose = {\r\n\t'mainCmdID': MDM_GA_GATESERVER,\r\n\t'subCmdID': SUB_GA_RESPOND_ROOMCLOSE,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'dwUserID',  \r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'dwServerID',  \r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'dwReason',   \r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'szErrorCode',   \r\n\t\t}\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\tlet dwUserID = stream.readUint32();\r\n\t\tlet dwServerID = stream.readUint32();\r\n\t\tlet dwReason = stream.readUint32();\r\n\t\tlet szErrorCode = stream.readString(128);    \r\n\t\targs.push(dwUserID, dwServerID,dwReason,szErrorCode);\r\n\t}\r\n};\r\n//状态命令\r\nconst MDM_GR_STATUS = 1004;        //状态信息\r\nconst SUB_GR_TABLE_INFO\t= 100;\t   //桌子信息\r\nconst SUB_GR_TABLE_STATUS = 101;   //桌子状态\r\ndatatypes.CMD_GR_TableStatus = {\r\n\t'mainCmdID': MDM_GR_STATUS,\r\n\t'subCmdID': SUB_GR_TABLE_STATUS,\r\n\t'argTypes': [\r\n\t\t{\r\n\t\t\t'name': 'wTableID',        //桌子号码\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'cbTableLock',     //锁定标志\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'cbPlayStatus',    //游戏标志\r\n\t\t},\r\n\t\t{\r\n\t\t\t'name': 'lCellScore',      //单元积分\r\n\t\t}\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\tlet wTableID = stream.readUint16();\r\n\t\tlet cbTableLock = stream.readUint8();\r\n\t\tlet cbPlayStatus = stream.readUint8();\r\n\t\tlet lCellScore = stream.readUint32();    \r\n\t\targs.push(wTableID, cbTableLock,cbPlayStatus,lCellScore);\r\n\t}\r\n};\r\ndatatypes.CMD_GR_TableInfo = {\r\n\t'mainCmdID': MDM_GR_STATUS,\r\n\t'subCmdID': SUB_GR_TABLE_INFO,\r\n\t'argTypes': [\r\n\t\t\r\n\t],\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n\t\t\r\n\t}\r\n};\r\n//内核命令\r\nconst  MDM_KN_COMMAND\t\t\t=\t0;\t\t\t\t\t\t\t\t\t//内核命令\r\nconst  SUB_KN_DETECT_SOCKET\t\t=   1;\t\t\t\t\t\t\t\t\t//检测命令\r\nconst  SUB_KN_VALIDATE_SOCKET\t=\t2;\t\t\t\t\t\t\t\t\t//验证命令\r\n//检测结构信息\r\ndatatypes.CMD_KN_DetectSocket = {\r\n\t'mainCmdID': MDM_KN_COMMAND,\r\n\t'subCmdID': SUB_KN_DETECT_SOCKET,\r\n\tsize: function () {\r\n\t\treturn 0;\r\n\t},\r\n\twrite2bundle: function (bundle:any, args:any) {\r\n\r\n\t},\r\n\tcreateFromStream: function (stream:any, args:any) {\r\n       \r\n\t}\r\n};","import {datatypes} from '../messageDef/GameTableProtocol'\r\nimport {Constants} from \"../Constants\"\r\nimport { globalData } from '../GlobalData';\r\nimport {director} from 'cc';\r\nconst global = globalThis;\r\n    \r\nexport let gameTableProxy = global.puremvc.define(\r\n\t{\r\n\t\tparent: global.puremvc.Proxy,\r\n\t\tconstructor: function () {\r\n\t\t\tglobal.puremvc.Proxy.call(this, this.constructor.NAME);\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tonRegister: function () {\r\n\r\n\t\t},\r\n\r\n\t\tregisterNetInterface: function (app:any) {\r\n\t\t\tthis.app = app;\r\n\t\t\tlet net = app.net;\r\n\t\t\tthis.net = net;\r\n            this.bSendOption = false;\r\n            //接收消息注册\r\n            net.registerServer(this, 'onSocketLogonSuccess', datatypes.CMD_GR_LogonSuccess);\r\n\t\t\tnet.registerServer(this, 'onSocketLogonFinish', datatypes.CMD_GR_LogonFinish);\r\n\t\t\tnet.registerServer(this, 'onSocketLogonFail', datatypes.CMD_GR_LogonFailure);\r\n            net.registerServer(this, 'onSocketConfigEvent', datatypes.CMD_GR_ConfigServer);\r\n            net.registerServer(this, 'onSocketUserEnter', datatypes.CMD_GR_UserEnter); \r\n            net.registerServer(this, 'onSocketUserScore', datatypes.CMD_GR_UserScore);\r\n            net.registerServer(this, 'onSocketUserStatus', datatypes.CMD_GR_UserStatus);\r\n            net.registerServer(this, 'onEventGameScene', datatypes.CMD_S_GameScene);\r\n\t\t\tnet.registerServer(this, 'detectSocket', datatypes.CMD_KN_DetectSocket);\r\n            net.registerServer(this, 'onMBLogonSuccess', datatypes.CMD_MB_LogonSuccess);\r\n            net.registerServer(this, 'onMBLogonFailure', datatypes.CMD_MB_LogonFailure);\r\n            net.registerServer(this, 'onSocketRespondError', datatypes.CMD_GA_RespondError);\r\n            net.registerServer(this, 'onSocketRespondRoomClose', datatypes.CMD_GA_RespondRoomClose);\r\n            net.registerServer(this, 'onSocketConfigFinish', datatypes.CMD_GR_ConfigFinish);           \r\n            net.registerServer(this, 'onSocketGameStatus', datatypes.CMD_GF_GameStatus);\r\n            net.registerServer(this, 'onSocketRequestFailure', datatypes.CMD_GR_RequestFailure);\r\n            net.registerServer(this, 'onSocketNoticeReady', datatypes.CMD_GF_NoticeReady);\r\n            net.registerServer(this, 'onSocketTableStatus', datatypes.CMD_GR_TableStatus);\r\n            net.registerServer(this, 'onSocketTableInfo', datatypes.CMD_GR_TableInfo);           \r\n            //发送消息注册\r\n            net.registerClient(this, 'sendLogonRoomData', datatypes.CMD_GR_LogonMobile);\r\n\t\t\tnet.registerClient(this, 'sendDetectSocket', datatypes.CMD_KN_DetectSocket);\r\n            net.registerClient(this, 'sendPhoneNumLogin', datatypes.CMD_MB_LogonByPhoneNum);           \r\n            net.registerClient(this, 'sendUserStandUp', datatypes.CMD_GR_UserStandUp);\t\r\n            net.registerClient(this, 'sendGameOption', datatypes.CMD_GF_GameOption);\r\n            net.registerClient(this, 'sendUserReady', datatypes.CMD_GF_UserReady);\t\r\n\t\t},\r\n        //接收网络数据\r\n        onSocketLogonSuccess:function(dwUserID:number,dwUserRight:number,dwMasterRight:number){\r\n            globalData.setUserID(dwUserID);\r\n        },\r\n        onSocketLogonFinish:function(dwUserID:number,wKindID:number,wServerID:number){\r\n            console.log('onSocketLogonFinish',dwUserID,wKindID,wServerID);\r\n            if(globalData.wTableID != Constants.INVALID_TABLE)\r\n            {\r\n                this.sendNotification(Constants.GMAENOTIFICATION_ID.GAME_ENTERGAMESCENE);             \r\n            }            \r\n        },\r\n        onSocketLogonFail:function(lErrorCode:number,wKindID:number,wServerID:number,szDescribeString:string){\r\n            console.log('onSocketLogonFail',lErrorCode,wKindID,wServerID,szDescribeString);\r\n        },\r\n        onSocketConfigEvent:function(data:any){\r\n            console.log('onSocketConfigEvent');\r\n        },\r\n        onSocketConfigFinish:function(data:any){\r\n            console.log('onSocketConfigFinish');\r\n        },\r\n        onSocketUserEnter:function(data:any){\r\n            console.log('onSocketUserEnter',data,globalData.wUserID);\r\n            let isMyself = false;\r\n            if(globalData.wUserID>0&&globalData.wUserID == data.dwUserID) isMyself = true;          \r\n            if(!globalData.wRoomUserList[globalData.wUserID]){\r\n                if(!isMyself) {\r\n                    console.log(\"never have own information, do not process other user information\");\r\n                    return;\r\n                }\r\n            }\r\n            else{\r\n                if(isMyself){\r\n                    console.log(\"you already have your own information, do not process your own information again\");\r\n                    return;\r\n                }\r\n            }\r\n            //添加用户数据\r\n            let isNeedAdd = true;\r\n            let userItem = globalData.wRoomUserList[data.dwUserID];\r\n            if(userItem){\r\n                //如果不为空，需要清掉之前的信息 清除旧桌子椅子记录          \r\n                if(userItem.wTableID != Constants.INVALID_TABLE){\r\n                    if((userItem.wTableID!=data.wTableID)||(userItem.wChairID!=data.wChairID)){\r\n                        globalData.onUpDataTableUser(userItem.wTableID,userItem.wChairID,null);\r\n                    }\r\n                }\r\n                isNeedAdd = false;\r\n                //更新信息\r\n                userItem.cbUserStatus = data.cbUserStatus;\r\n                userItem.wTableID = data.wTableID;\r\n                userItem.wChairID = data.wChairID;\r\n                userItem.szNickName = data.szNickName;\r\n                userItem.lScore = data.lScore;\r\n            }\r\n            if(isNeedAdd){\r\n                globalData.wRoomUserList[data.dwUserID] = data;\r\n            }\r\n            //记录自己的桌椅号\r\n            if(isMyself){\r\n                globalData.wTableID = data.wTableID; \r\n                globalData.wChairID = data.wChairID;\r\n                console.log(\"当前桌号：\"+globalData.wTableID+\";椅子号：\"+globalData.wChairID);\r\n                globalData.wUserScore = data.lScore;\r\n                globalData.wFaceID = data.wFaceID;\r\n                globalData.wSzNickName = data.szNickName;\r\n            }\r\n            if(data.wTableID != Constants.INVALID_TABLE && data.cbUserStatus != Constants.USER_STATUS.US_LOOKON){\r\n                globalData.onUpDataTableUser(data.wTableID,data.wChairID,data);\r\n            }\r\n\r\n\r\n        },\r\n        onSocketUserScore:function(data:any){\r\n            console.log('onSocketUserScore',data);\r\n            let userItem = globalData.wRoomUserList[data.dwUserID];\r\n            if(userItem){\r\n                //更新数据\r\n                userItem.lScore = data.lScore;\r\n                userItem.lDiamond = data.lDiamond;\r\n                userItem.lExperience = data.lExperience;\r\n                userItem.lLpValues = data.lLpValues;\r\n                userItem.lTicket = data.lTicket;\r\n                //自己信息\r\n                if(userItem.dwUserID == globalData.wUserID){\r\n                    globalData.wUserScore = data.lScore;\r\n                }\r\n            }\r\n        },\r\n        onSocketUserStatus:function(dwUserID:number,wTableID:number,wChairID:number,cbUserStatus:number){\r\n            console.log('onSocketUserStatus',dwUserID,wTableID,wChairID,cbUserStatus);\r\n            //过滤观看\r\n            if(cbUserStatus == Constants.USER_STATUS.US_LOOKON) return;\r\n            if(!globalData.wRoomUserList[globalData.wUserID]) return;\r\n            let roomUserItem = globalData.wRoomUserList[dwUserID];\r\n            //找不到用户\r\n            if(!roomUserItem){\r\n               return;\r\n            }\r\n            //记录旧状态\r\n            let oldstatus = {\r\n                cbUserStatus:roomUserItem.cbUserStatus,\r\n                wTableID:roomUserItem.wTableID,\r\n                wChairID:roomUserItem.wChairID\r\n            };      \r\n            //更新信息\r\n            roomUserItem.cbUserStatus = cbUserStatus;\r\n            roomUserItem.wTableID = wTableID;\r\n            roomUserItem.wChairID = wChairID;\r\n            //清除旧状态\r\n            if(oldstatus.wTableID!=Constants.INVALID_TABLE){\r\n                if((oldstatus.wTableID != wTableID)||(oldstatus.wChairID!=wChairID)){\r\n                    globalData.onUpDataTableUser(oldstatus.wTableID,oldstatus.wChairID,null);\r\n                }\r\n            }\r\n            //新状态\r\n            globalData.onUpDataTableUser(wTableID,wChairID,roomUserItem);\r\n            let isMyself = (globalData.wUserID == dwUserID);\r\n            if(isMyself){\r\n                globalData.wTableID = wTableID;\r\n                globalData.wChairID = wChairID;\r\n                if(cbUserStatus == Constants.USER_STATUS.US_NULL){\r\n                    //离开房间\r\n                    this.sendExitTable();  \r\n                }\r\n                else if(cbUserStatus == Constants.USER_STATUS.US_FREE && oldstatus.cbUserStatus>Constants.USER_STATUS.US_FREE){\r\n                    if(!globalData.wChangeDesk) this.sendExitTable();\r\n                }\r\n                else if(cbUserStatus>Constants.USER_STATUS.US_FREE && oldstatus.cbUserStatus < Constants.USER_STATUS.US_SIT){\r\n                    //坐下\r\n                    if(globalData.wChangeDesk){\r\n                        globalData.wChangeDesk = false;\r\n                        this.bSendOption = false;\r\n                    }\r\n                    this.sendNotification(Constants.GMAENOTIFICATION_ID.GAME_ENTERGAMESCENE);  \r\n                }\r\n                else if(globalData.wChangeDesk){\r\n                    //换位\r\n                    //this.sendGameOption();\r\n                }\r\n                else{\r\n                    //其它状态\r\n\r\n                }\r\n\r\n            }\r\n            else{\r\n                //删除用户\r\n                if(cbUserStatus == Constants.USER_STATUS.US_NULL || (cbUserStatus == Constants.USER_STATUS.US_FREE)){\r\n                    console.log(\"删除离开用户\",dwUserID);\r\n                    delete globalData.wRoomUserList[dwUserID];\r\n                }\r\n            }\r\n           \r\n        },\r\n        onSocketRequestFailure:function(lErrorCode:number,szDescribeString:string){\r\n            console.log(\"onSocketRequestFailure\",lErrorCode,szDescribeString);\r\n            if(lErrorCode>0&&szDescribeString.length>0){\r\n                this.sendExitTable();\r\n            }\r\n        },\r\n        onEventGameScene:function(data:any){\r\n            console.log('onEventGameScene',data);\r\n            this.sendNotification(Constants.GMAENOTIFICATION_ID.GAME_GAMESCENE,data);\r\n        },\r\n        onMBLogonSuccess:function(data:any){\r\n            console.log(\"onMBLogonSuccess\");\r\n            console.log(data);\r\n            globalData.wUserID = data.dwUserID;\r\n            globalData.wSzToken = data.szToken;\r\n            globalData.wSzAccounts = data.szAccounts;\r\n            //this.sendLogonRoomData();\r\n        },\r\n        onMBLogonFailure:function(lResultCode:number,szDescribeString:string){\r\n            console.log(\"onMBLogonFailure\");\r\n            console.log(lResultCode);\r\n            console.log(szDescribeString);\r\n        },\r\n        onSocketRespondError:function(cbShutDown:number,szErrorCode:string){\r\n            console.log(\"onSocketRespondError\",cbShutDown,szErrorCode);\r\n        },\r\n        onSocketRespondRoomClose:function(dwUserID:number,dwServerID:number,dwReason:number,szErrorCode:string){\r\n            console.log(\"onSocketRespondRoomClose\",dwUserID,dwServerID,dwReason,szErrorCode);\r\n        },\r\n        detectSocket: function () {\r\n            console.log(\"detectSocket\");\r\n\t\t\tthis.net.callServer('sendDetectSocket');\r\n\t\t},\r\n        onSocketGameStatus:function(cbGameStatus:number,cbAllowLookon:number){\r\n            console.log(\"onSocketGameStatus\",cbGameStatus,cbAllowLookon);\r\n            globalData.wGameStatus = cbGameStatus;\r\n        },\r\n        onSocketNoticeReady:function(data:any){\r\n            console.log(\"onSocketNoticeReady\");\r\n            this.sendUserReady();\r\n        },\r\n        onSocketTableStatus:function(wTableID:number, cbTableLock:number,cbPlayStatus:number,lCellScore:number){\r\n            console.log(\"onSocketTableStatus\");\r\n        },\r\n        onSocketTableInfo:function(data:any){\r\n            console.log(\"onSocketTableInfo\");\r\n        },\r\n        //发送网络数据\r\n        sendLogonRoomData:function(){\r\n            let app = this.app;\r\n            app.connect(function () {             \r\n                app.net.callServer('sendLogonRoomData', Constants.GAME_ID,2,1,2,Constants.SERVER_ID,globalData.wUserID,globalData.wSzToken,\"abcdefghijklmn\",globalData.wSzAccounts);    \r\n            });   \r\n        },     \r\n        sendPhoneNumLogin:function(phoneNum:string){\r\n            let app = this.app;\r\n            app.connect(function () {            \r\n\t\t\t\tapp.net.callServer('sendPhoneNumLogin', 1,1,\"default\",phoneNum,\"1111\",1,\"\",\"\",\"\",\"\",\"\");               \r\n            });\r\n        },\r\n        sendExitTable:function():string{\r\n            let roomUserItem = globalData.wRoomUserList[globalData.wUserID];\r\n            if(!roomUserItem) return \"用户不存在\";\r\n            if(roomUserItem.cbUserStatus>=Constants.USER_STATUS.US_FREE){\r\n                this.sendStandUpData(1);\r\n            }\r\n            else{\r\n                return \"还在游戏中\";\r\n            }\r\n            let curScene = director.getScene();\r\n            if(curScene &&curScene.name == \"GameScene\"){\r\n                director.loadScene(\"LoadScene\");\r\n            }\r\n            return \"正在退出\";\r\n        },\r\n        sendStandUpData:function(force:number){\r\n            force = (force) ? 1 : 0;\r\n            this.app.net.callServer('sendUserStandUp', globalData.wTableID,globalData.wChairID,force);\r\n        },\r\n        sendGameOption:function(){\r\n            if(this.bSendOption){\r\n                console.log(\"已发送过sendGameOption\");\r\n                return\r\n            }\r\n            this.bSendOption = true;\r\n            this.app.net.callServer('sendGameOption', 0,101122049,2);\r\n        },\r\n        sendUserReady:function(){\r\n            this.app.net.callServer('sendUserReady');\r\n        }\r\n\r\n\t},\r\n\t{\r\n\t\tNAME: 'GameTableProxy'\r\n\t});","import { Constants } from \"./Constants\";\r\nclass GlobalData {\r\n    wUserID:number = 0;\r\n    wUserScore:number = 0;\r\n    wSzNickName:string = 'unknown';\r\n    wSzToken:string = '';\r\n    wSzAccounts:string = '';\r\n    wFaceID:number = 1;\r\n    wTableID:number = Constants.INVALID_TABLE;  //自己所在的桌子id\r\n    wChairID:number = Constants.INVALID_CHAIR;  //自己所在的椅子id\r\n    wRoomUserList:{} = {};  //房间内用户列表\r\n    wTableUserList:{} = {}; //桌子上用户列表\r\n    wChangeDesk:boolean = false;\r\n    wGameStatus:number = Constants.GAME_STATUS.GAME_SCENE_FREE;\r\n    wMusicEnable:boolean = true;\r\n    wEffctEnable:boolean = true;\r\n    static _classInstance:GlobalData = null; \r\n    \r\n    constructor(){  \r\n\r\n    }\r\n    setUserAccountData(szToken:string,szAccounts:string){\r\n        this.wSzToken = szToken;\r\n        this.wSzAccounts = szAccounts;\r\n    }\r\n    setUserID(userID:number){\r\n        this.wUserID = userID;\r\n    }\r\n    //更新桌椅用户\r\n    onUpDataTableUser(tableid:number, chairid:number, useritem:any){\r\n        let wTableid = tableid + 1;\r\n        let wChairid = chairid + 1;\r\n        \r\n        if(!this.wTableUserList[tableid]){\r\n            this.wTableUserList[tableid] = {};\r\n        }\r\n        if(useritem) {\r\n            this.wTableUserList[tableid][chairid] = useritem.dwUserID;\r\n        }\r\n        else{\r\n            delete this.wTableUserList[tableid][chairid];\r\n        }\r\n    }\r\n    static getInstance(){\r\n        if(!GlobalData._classInstance){\r\n            GlobalData._classInstance = new GlobalData();\r\n        }\r\n        return GlobalData._classInstance;\r\n    }\r\n}\r\nexport let globalData = GlobalData.getInstance();","import { _decorator, Component, EventTouch, Node, PageView } from 'cc';\r\nimport { Constants } from '../Constants';\r\nimport { GameFacadeInstance } from '../GameFacade';\r\nconst { ccclass, property } = _decorator;\r\nconst PAGE_COUNT = 4;\r\n@ccclass('HelpView')\r\nexport class HelpView extends Component {\r\n    @property(PageView)\r\n    ruleView:PageView = null;\r\n\r\n    _pageIndex = 0;\r\n    start() {\r\n \r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n    onChangeRuleView(event:EventTouch, customEventData:string){\r\n        if(customEventData == 'PAGE_LEFT'){\r\n            this._pageIndex-=1;\r\n            if(this._pageIndex<0) this._pageIndex = PAGE_COUNT -1;\r\n        }\r\n        else{\r\n            this._pageIndex+=1;\r\n            if(this._pageIndex>=PAGE_COUNT) this._pageIndex = 0;\r\n        }\r\n        this.ruleView.setCurrentPageIndex(this._pageIndex);\r\n    }\r\n    onBtnClose(){\r\n        GameFacadeInstance.sendNotification(Constants.GMAENOTIFICATION_ID.CLOSEPOPUPVIEW);\r\n    }\r\n}\r\n\r\n\r\n","import { _decorator, Component, director, find, Label, Node, ProgressBar, ResolutionPolicy, sys, Vec3, view } from 'cc';\r\nimport { globalData } from '../GlobalData';\r\nimport { GameFacadeInstance } from '../GameFacade';\r\nimport { Constants } from '../Constants';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('LoadScene')\r\nexport class LoadScene extends Component {\r\n    @property(ProgressBar)\r\n    gameProgress:ProgressBar = null;\r\n    @property(Label)\r\n    labTip:Label = null;\r\n\r\n    _enterGameScene:boolean = false;\r\n    start() {\r\n        GameFacadeInstance.registerMediator(this);\r\n        this.parseUrlData();\r\n        GameFacadeInstance.sendNotification(Constants.GMAENOTIFICATION_ID.GAME_LOGIN);\r\n    }\r\n    protected onLoad(): void {\r\n        if (sys.isMobile) {\r\n            view.setDesignResolutionSize(750,1334,ResolutionPolicy.FIXED_WIDTH);\r\n            let cameraNode = find('Canvas/Camera');\r\n            //设置相机的本地旋转为90度\r\n            cameraNode.eulerAngles = new Vec3(0, 0, 90);\r\n        }\r\n    }\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n    protected onDestroy(): void {\r\n        GameFacadeInstance.removeMediator(this.name);\r\n    } \r\n    listNotificationInterests(){\r\n\t\treturn [\r\n            {\r\n                evtType:Constants.GMAENOTIFICATION_ID.GAME_ENTERGAMESCENE,\r\n                callback: this.loginFinish\r\n            }\r\n        ];\r\n\t}\r\n    loginFinish(){\r\n        if(!this._enterGameScene)\r\n        {\r\n            this._enterGameScene = true;\r\n            this.labTip.string = 'logon in success';\r\n            director.preloadScene('GameScene',this.onLoadingProgress.bind(this),this.onLoadFinished.bind(this));  \r\n        }\r\n    }\r\n    onLoadingProgress(completedCount: number, totalCount: number, item: any){\r\n        let progressValue = completedCount/totalCount;\r\n        this.gameProgress.progress = progressValue;\r\n        this.labTip.string = \"Resource Loading \"+(progressValue*100).toFixed(0)+\"%\";\r\n    }\r\n    onLoadFinished(error: null | Error){\r\n        if(error){\r\n            console.log(error.message);\r\n            return;\r\n        }\r\n       director.loadScene('GameScene');\r\n    }\r\n    parseUrlData(){\r\n        console.log('parseUrlData');\r\n        let account = \"\";\r\n        let token = \"\";\r\n        var parmStr = window.location.href.split('?')[1];\r\n        if (parmStr) {\r\n            var parms = parmStr.split('&');\r\n            parms.forEach(element => {\r\n                var parm = element.split('=');\r\n                if (parm[0] == \"member_account\") {\r\n                    account = parm[1];\r\n                }\r\n                else if (parm[0] == \"token\") {\r\n                    token = parm[1];\r\n                }\r\n            });\r\n        }\r\n        globalData.setUserAccountData(token,account);\r\n    }\r\n}\r\n\r\n\r\n","import { _decorator, Component, instantiate, Label, Node, Prefab, tween, Animation, Tween, find } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\nimport { Constants } from '../Constants';\r\n@ccclass('RewardAniNode')\r\nexport class RewardAniNode extends Component {\r\n    @property(Prefab)\r\n    normalRewardNode:Prefab = null;\r\n    @property(Prefab)\r\n    bigRewardNode:Prefab = null;\r\n    @property(Prefab)\r\n    poolRewardNode:Prefab = null;\r\n\r\n    _poolReward:number = 0;\r\n    _winScore:number = 0;\r\n    _isBigReward:boolean = false;\r\n    _gameScene:any = null;\r\n    start() {\r\n       \r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n    showRewardAni(poolReward:number,winScore:number,isBigReward:boolean,gameScene:any){ \r\n        if(this.node.active) return;\r\n        this.node.active = true;\r\n        this._poolReward = poolReward;\r\n        this._winScore = winScore;\r\n        this._isBigReward = isBigReward;\r\n        this._gameScene = gameScene;\r\n        if(poolReward>0){\r\n            this.showPoolReward();\r\n        }\r\n        else{\r\n            if(isBigReward) this.showBigReward();\r\n            else this.showNormalReward();\r\n        }\r\n    }\r\n    private showPoolReward(){\r\n        let aniNode = instantiate(this.poolRewardNode);\r\n        if(aniNode){\r\n            this.node.addChild(aniNode);\r\n            let labScore = aniNode.getChildByName('sprPool').getComponentInChildren(Label); \r\n            if(labScore){\r\n                let addTimes = 20;\r\n                let poolNum = 0;\r\n                let addNum = this._poolReward/addTimes;\r\n                let addNumTween  =  tween(labScore)\r\n                                    .delay(0.05)\r\n                                    .call(()=>{\r\n                                        poolNum+=addNum;\r\n                                        labScore.string = Constants.FormatScore(poolNum);\r\n                                    });\r\n                tween(labScore).repeat(addTimes,addNumTween).start();\r\n            } \r\n            let poolAni = aniNode.getComponent(Animation);\r\n            if(poolAni){\r\n                poolAni.on(Animation.EventType.FINISHED,()=>{\r\n                    if(this._isBigReward) this.showBigReward();\r\n                    else if(this._winScore>0)this.showNormalReward();\r\n                    else this.aniFinshCallBack();                  \r\n                });\r\n                poolAni.play();\r\n            }\r\n        }\r\n    }\r\n    private showBigReward(){\r\n        let aniNode = instantiate(this.bigRewardNode);\r\n        if(aniNode){\r\n            this.node.addChild(aniNode);\r\n            let labScore = aniNode.getChildByName('sprBigWin').getComponentInChildren(Label);\r\n            if(labScore){\r\n                let addTimes = 10;\r\n                let curScore = 0;\r\n                let addScore = this._winScore/addTimes;\r\n                let addScoreTween = tween(labScore)\r\n                                    .delay(0.05)\r\n                                    .call(()=>{\r\n                                        curScore+=addScore;\r\n                                        labScore.string = Constants.FormatScore(curScore);\r\n                                    });\r\n                tween(labScore).repeat(addTimes,addScoreTween).start();\r\n            }\r\n            let bigRewardAni = aniNode.getComponent(Animation);\r\n            if(bigRewardAni){\r\n                bigRewardAni.on(Animation.EventType.FINISHED,this.aniFinshCallBack,this);\r\n                bigRewardAni.play();\r\n            }\r\n        }\r\n    }\r\n    private showNormalReward(){\r\n        let aniNode = instantiate(this.normalRewardNode);\r\n        if(aniNode){\r\n            this.node.addChild(aniNode);\r\n            let labScore = find('aniNode/labScore',aniNode)?.getComponent(Label);\r\n            if(labScore) labScore.string = Constants.FormatScore(this._winScore);\r\n            let normalRewardAni = aniNode.getComponent(Animation);\r\n            if(normalRewardAni){\r\n                normalRewardAni.on(Animation.EventType.FINISHED,this.aniFinshCallBack,this);\r\n                normalRewardAni.play();\r\n            }\r\n        }\r\n    }\r\n    private aniFinshCallBack(){\r\n        this.node.active = false;\r\n        this.node.destroyAllChildren();\r\n        this._gameScene.rewardFinish();\r\n    }\r\n    protected onDisable(): void {\r\n        Tween.stopAll();\r\n    }\r\n}\r\n\r\n\r\n","import { _decorator, Button, Component, Node, SpriteFrame } from 'cc';\r\nimport { GameFacadeInstance } from '../GameFacade';\r\nimport { Constants } from '../Constants';\r\nimport { globalData } from '../GlobalData';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SetView')\r\nexport class SetView extends Component {\r\n    @property(Button)\r\n    btnMusic:Button = null;\r\n    @property(Button)\r\n    btnSound:Button = null;\r\n    @property(SpriteFrame)\r\n    btnChangeFrame:SpriteFrame[] = [];\r\n\r\n    _musicEnable:boolean = true;\r\n    _effectEnable:boolean = true;\r\n\r\n    start() {\r\n        this.initBtnState();\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n    onBtnMusic(){\r\n        this._musicEnable = !this._musicEnable;\r\n        let frameIndex = this._musicEnable?0:1;\r\n        this.btnMusic.normalSprite = this.btnChangeFrame[frameIndex];\r\n    }\r\n    onBtnSound(){\r\n        this._effectEnable = !this._effectEnable;\r\n        let frameIndex = this._effectEnable?0:1;\r\n        this.btnSound.normalSprite = this.btnChangeFrame[frameIndex];\r\n    }\r\n    private initBtnState(){\r\n        this._musicEnable = globalData.wMusicEnable;\r\n        this._effectEnable = globalData.wEffctEnable;\r\n        let frameIndex = this._musicEnable == true?0:1;\r\n        this.btnMusic.normalSprite = this.btnChangeFrame[frameIndex];\r\n        frameIndex = this._effectEnable == true?0:1;\r\n        this.btnSound.normalSprite = this.btnChangeFrame[frameIndex];\r\n    }\r\n    onClose(){\r\n        GameFacadeInstance.sendNotification(Constants.GMAENOTIFICATION_ID.SETAUDIOENABLE,this._musicEnable,this._effectEnable);\r\n        GameFacadeInstance.sendNotification(Constants.GMAENOTIFICATION_ID.CLOSEPOPUPVIEW);\r\n    }\r\n}\r\n\r\n\r\n"]}